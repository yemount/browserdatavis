!function(e){var n;"function"==typeof require?require(["jquery","vendor/spin","has","lib/social","be/responsive","be/postmessage","be/bell","be/inboxNav","signup/expedited","nbd/util/media"],function(){n=e.apply(this,arguments),n.require()}):(n=e.call(this,jQuery,Spinner),$.Core&&"object"==typeof $.Core.Events?$.Core.Events.bind("resources.beforeLoaded",n.init):jQuery(n.init),this.Network=n)}(function(e,n,t,o,i,s,a,d,r,c){var u={Model:{},View:{Popup:{},Action:{},Cover:{}},Templates:{},Constants:{},CCN_COLORS:{adweek:"#ED1D25",aiga:"#DA4D49",artcenter:"#F96610",artinstitutes:"#ED1C24",studentshow:"#00CDB5",sva:"#01A3DF",risd:"#E7363F",scad:"#669933",aau:"#cc0018",mica:"#bf3536",ccs:"#ffdd00",nda:"#f47d20",pantone:"#292929",pratt:"#eaac1f",ringling:"#17BBBB",losandes:"#666666",philau:"#a90011",wacom:"#01a7df",saic:"#F36BC0",corcoran:"#ec0b6d",fit:"#0057a6"},POPUPS:{Message:"Messages",GroupInvite:"GroupInvites",InnerCircleInvite:"InnerCircleInvites",InnerCircleAccept:"InnerCircleAccepts",Spam:"Spams"},ACTIONS:{"Follow.User":"UserFollows","Follow.Collection":"CollectionFollows","Follow.Site":"SiteFollows"},RESPONSES:{403:function(n){var t=e.extend({},{reload:1},n);return e(document.body).hasClass("activity-page")||e(document.body).hasClass("served")?void Auth.login.popup(!1,t):e(document.body).hasClass("iframe-view")&&e(document.body).hasClass("logged-out")?void window.open("/signup"):void(window.location.href="/signup")},417:function(e){Auth.unverified(e)}},init:function(){Config.$body=e(document.body),Config.$window=e(window);var t=!1;n.defaults={color:"#008cff"},e(document.body).hasClass("ccn_gallery2")&&(t=e(document.body).attr("ccn"),"undefined"!=typeof u.CCN_COLORS[t]&&(n.defaults.color=u.CCN_COLORS[t])),u.initPlaceholders(),u.initPing(),u.initZen(),u.View.Widget.init(),e(document).bind("ajaxError",function(n,t){var o,i=""!==t.responseText?e.parseJSON(t.responseText):{};o=i?u.RESPONSES[i.response_code]:u.RESPONSES[500],e.isFunction(o)&&o(i)}),e.Core.Events.bind("resources.loaded",function(){u.initCommon("POPUPS","Popup"),u.initCommon("ACTIONS","Action")})},initPing:function(){("undefined"==typeof E2||"undefined"==typeof E2.ContentEditor||"iframe"!==E2.ContentEditor.mode)&&e(document.body).hasClass("logged-in")&&setInterval(function(){var n,t={};"object"==typeof E2&&"object"==typeof E2.Modules&&new Date-n>=36e5&&(t.temp_files=E2.Modules.getTempFiles().join("|"),n=new Date),e.ajax({url:"/v1/ping",data:t,type:"POST",dataType:"html"})},3e5)},initMobile:function(){},initPlaceholders:function(){var n=function(){var n=void 0!==this._supported?this._supported:"undefined"!=typeof e('<input type="text">')[0].placeholder;return this._supported=n,n};n()||e(document.body).find("input[placeholder]").each(function(){var n=e(this);n.defaultValue(n.attr("placeholder"))})},initCommon:function(n,t){e.each(this[n],function(n,o){var i=n.split("."),s=u.View[t],a=t,d=!1,r=!0;e.each(i,function(e,n){return s&&s[n]?(s=s[n],d=n,void(a=a+"."+n)):(r=!1,!1)}),r===!0&&"function"==typeof s&&(u[o]=new e.Core.Collection("Network.View."+a),s.init())})},disabledUpload:function(n,t){return n.uploads&&n.uploads.disabled===!0?(t===!0&&e.Core.popup({header:n.uploads.disabled_header||"Upload Maintenance",description:n.uploads.disabled_msg||"Please try again later"}),!0):!1},require:function(){function l(){"undefined"!=typeof Config&&require(["css!"+Config.HFJURL])}function p(e){try{return JSON.parse(e.responseText)}catch(n){return{}}}function f(e){window.top!==window&&e.openBrowser?s({type:"openBrowser",url:e.destination}):window.location.href=e.destination}e(document.body).addClass(t("touch")?"has-touch":"no-has-touch").addClass(t("input-placeholder-standard")?"has-placeholders":"no-has-placeholders");var h=e(document.body),C=u.CCN_COLORS[h.attr("ccn")]||"#008cff";Config.$body=h,n.defaults={color:C},u.initPing(),u.initZen(),o.init(),i.init(),window.top===window&&((~c.getState().indexOf("phone")||~c.getState().indexOf("tablet"))&&l(),c.on("phone tablet",l)),e(document.body).hasClass("flag-inbox-v2")&&d.init(),a.init(),r.init(),e(document).on({ajaxSuccess:function(e,n){var t=p(n);return t.expedited_signup_url?r.open(t.expedited_signup_url):t.destination?f(t):void 0},ajaxError:function(n,t){var o=u.RESPONSES[t.status];return e.isFunction(o)?o(p(t)):void 0}})},initZen:function(){function n(){var e,n;e=document.createElement("script"),e.src="//assets.zendesk.com/external/zenbox/v2.6/zenbox.js",e.type="text/javascript",e.id="zenbox-script",document.head.appendChild(e),n=document.createElement("link"),n.href="//assets.zendesk.com/external/zenbox/v2.6/zenbox.css",n.type="text/css",n.id="zenbox-style",n.rel="stylesheet",n.media="screen, projection",document.head.appendChild(n)}function t(){try{if("object"!=typeof Zenbox)return e("#zenbox-script").length||n(),setTimeout(t,150),!1;"function"==typeof Zenbox.init&&(Zenbox.init(Config.ZENBOX),"function"==typeof Zenbox.show&&Zenbox.show())}catch(o){}return!1}e(".zendesk-footer-link").bind("click",t)}};return u});
;define("lib/scrollpoint",["jquery"],function(e){"use strict";function t(e){return c.test(e)||e>0&&1>e}function n(t){if(e.isNumeric(t))return parseFloat(t);var n=c.exec(t);return n?n[1]/100:parseInt(t,10)}function i(e){return e.is(u)?d.height()-(window.innerHeight||u.height()):e.prop("scrollHeight")}function o(e,n,o){return n>(t(e)?e*i(o):parseInt(e,10))}function r(t){var n="window"===t?u:e(t);return function(){var e,i,r,s=n.scrollTop();for(e in f[t])i=f[t][e],r=o(e,s,n),i.cache=i.cache||!1,i.cache!==r&&(i.fire(r),i.cache=r)}}function s(t,i,o){t=n(t);var r=f[o][t];r||(r=f[o][t]=new e.Callbacks),r.add(i)}function a(e,t,n){n=n||"window";var i;if(t){if(e)return void f[n][e].remove(t);for(i in f[n])f[n][i].remove(t)}else"string"==typeof e&&(f[n][e].empty(),delete f[n][e]),n&&delete f[n]}function l(t,n,i){i=i||"window";var o,a="window"===i?u:e(i);f.hasOwnProperty(i)||(f[i]={},a.on("scroll",r(i)));{if("object"!=typeof t)return s(t,n,i);for(o in t)s(o,t[o],i)}}var c=/(\d+)%/,u=e(window),d=e(document),f={};return l.on=l,l.off=a,l}),define("be/View/Basement",["jquery","nbd/View/Element"],function(e,t){"use strict";var n=t.extend({init:function(e){this._super(e),e&&(this.$view=e),this.limit=this.limit.bind(this)},destroy:function(){e(document.body).off(this.scroll),this.$view=null},template:e,rendered:function(){var t=this;this.$view.on("click","#nav_item_user, #nav_item_more",function(){window.scrollTo(0,e(this).toggleClass("open").position().top),t.limit(!0)})},limit:function(t){if(this.$view){var n=Math.max(this.$view.find(".nav-items").outerHeight(),window.innerHeight),i={height:n},o={height:""},r=e(document.body).add("#navmenui-basement");t?r.css(i):e(document.body).one("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",function(){r.css(o)})}},open:function(){e(document.body).addClass("basement-open"),this.limit(!0),e(window).on("orientationchange",this.limit)},close:function(){e(document.body).removeClass("basement-open"),this.limit(!1),e(window).off("orientationchange",this.limit)},toggle:function(){e(document.body).toggleClass("basement-open");var t=e(document.body).hasClass("basement-open");this.limit(t),e(window)[t?"on":"off"]("orientationchange",this.limit)}});return n}),define("require/hgn!templates/dialog",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="popup '),i.b(i.v(i.f("dialogType",e,t,0))),i.s(i.f("classes",e,t,1),e,t,0,44,50,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.s(i.f("buttons",e,t,1),e,t,1,0,0,"")||i.b(" no-buttons"),i.s(i.f("title",e,t,1),e,t,1,0,0,"")||i.b(" no-title"),i.s(i.f("fullBleed",e,t,1),e,t,0,140,151,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" full-bleed")}),e.pop()),i.b('">'),i.b("\n"+n),i.b('  <div class="popup-inner-wrap">'),i.b("\n"),i.b("\n"+n),i.s(i.f("toolbar",e,t,1),e,t,0,218,647,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <div class="'),i.s(i.f("layover",e,t,1),e,t,0,247,254,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("toolbar")}),e.pop()),i.s(i.f("layover",e,t,1),e,t,1,0,0,"")||i.b("popup-header"),i.b('">'),i.b("\n"+n),i.b('      <div class="header">'),i.b(i.t(i.f("title",e,t,0))),i.b("</div>"),i.b("\n"+n),i.s(i.f("hideClose",e,t,1),e,t,1,0,0,"")||(i.b('        <a class="header-action close right js-close'),i.s(i.f("layover",e,t,1),e,t,1,0,0,"")||i.b(" popup-close"),i.b('">'),i.b("\n"+n),i.b('          <span class="nav-icon-close nav-icon"></span>'),i.b("\n"+n),i.b("        </a>"),i.b("\n"+n)),i.s(i.f("layover",e,t,1),e,t,0,569,619,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.s(n.f("button",e,t,1),e,t,0,589,601,"{{ }}")&&(n.rs(e,t,function(e,t,n){n.b(n.rp("<button0",e,t,""))}),e.pop())}),e.pop()),i.b("    </div>"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.b('    <div class="popup-content'),i.s(i.f("toolbar",e,t,1),e,t,0,702,714,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" has-toolbar")}),e.pop()),i.b('">'),i.b("\n"+n),i.b(i.rp("<content1",e,t,"      ")),i.s(i.f("layover",e,t,1),e,t,1,0,0,"")||(i.b("    </div>"),i.b("\n"+n)),i.b("\n"+n),i.b('      <div class="popup-buttons'),i.s(i.f("buttons",e,t,1),e,t,1,0,0,"")||i.b(" hide"),i.b('">'),i.b("\n"+n),i.s(i.f("buttons",e,t,1),e,t,0,878,890,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<button2",e,t,""))}),e.pop()),i.b("      </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("layover",e,t,1),e,t,0,933,949,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("    </div>"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.b("  </div> <!-- /.popup-inner -->"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("blocking",e,t,1),e,t,0,1017,1051,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="blocking-div"></div>'),i.b("\n"+n)}),e.pop()),i.fl()},partials:{"<button0":{name:"button",partials:{},subs:{}},"<content1":{name:"content",partials:{},subs:{}},"<button2":{name:"button",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/button",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('  <div class="form-item form-item-a'),i.s(i.f("containerClasses",e,t,1),e,t,0,56,62,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('">'),i.b("\n"+n),i.b('    <a class="form-button'),i.s(i.f("classes",e,t,1),e,t,0,123,129,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.s(i.f("classes",e,t,1),e,t,1,0,0,"")||i.b(" form-button-default"),i.b('"'),i.b("\n"+n),i.b("      "),i.s(i.f("href",e,t,1),e,t,0,202,218,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' href="'),n.b(n.v(n.f("href",e,t,0))),n.b('"')}),e.pop()),i.b(' unselectable="on"'),i.b("\n"+n),i.b("      tabindex="),i.s(i.f("tabindex",e,t,1),e,t,0,274,288,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('"'),n.b(n.v(n.f("tabindex",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("      "),i.s(i.f("tabindex",e,t,1),e,t,1,0,0,"")||i.b('"0"'),i.b(">"),i.b(i.v(i.f("label",e,t,0))),i.b("</a>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/Dialog",["jquery","nbd/View/Entity","nbd/util/extend","hgn!templates/dialog","hgn!templates/button"],function(e,t,n,i,o){"use strict";var r=t.extend({mustache:{},template:function(t){return e(i(t,n({content:this.mustache.template,button:o.template},this.partials)))},rendered:function(){this.$view.on("click",".js-close, .close, .form-button-close, .form-button-cancel",this.hide.bind(this)).find(".form-button-disabled").on("click",!1)},position:function(){},show:function(){return this.trigger("show",this.$view)},hide:function(){return this.trigger("hide",this.$view)},toggle:function(){var e=this.$view.is(":visible");return this[e?"hide":"show"]()}});return r}),define("be/View/Dialog/Layover",["jquery","be/View/Dialog"],function(e,t){"use strict";var n=t.extend({destroy:function(){this.hide(),this._super()},template:function(t){return this._super(e.extend({dialogType:"layover",layover:!0,toolbar:!0},t))},rendered:function(){this._super(),this.show()},show:function(){return this.$view?(this.scrollTop=this.scrollTop||e(window).scrollTop(),e("#site-content").hide(),e("html").addClass("overflow-hidden"),this.$view.show(),this._super()):void 0},hide:function(){return this.$view?(e("#site-content").show(),e("html").removeClass("overflow-hidden"),window.scrollTo(0,this.scrollTop),delete this.scrollTop,this.$view.hide(),this._super()):void 0}});return n}),define("require/hgn!templates/discover/search",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div id="search-popup">'),i.b("\n"+n),i.b('  <form class="search-option-confirm">'),i.b("\n"+n),i.b('    <input type="search" class="form-text form-text-normal form-search form-searchi" placeholder="Search Behance" name="search" /><!--'),i.b("\n"+n),i.b('    --><a class="form-button form-button-light-and-grey close">Cancel</a>'),i.b("\n"+n),i.b("  </form>"),i.b("\n"+n),i.b("</div>"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/Dialog/Layover/Search",["jquery","be/View/Dialog/Layover","hgn!templates/discover/search"],function(e,t,n){"use strict";var i=t.extend({mustache:n,template:function(t){return this._super(e.extend({classes:["search"],hide_toolbar:!0},t))},rendered:function(){this.$view.addClass("mobile-popup-transparent mobile-popup-full-bleed").on("click",".search-option-confirm",!1).on("click",".mobile-popup-content, .close",this.hide.bind(this)).on("touchmove",!1)},show:function(){return window.scrollTo(0,1),this.$view&&this.$view.show().find("input").focus()},hide:function(){return this.$view&&this.$view.hide()},toggle:function(){return this.$view?void this._super():(window.scrollTo(0,1),this.render(e(document.body)),void this.$view.find("input").focus())}});return i}),define("be/navigation",["jquery","nbd/trait/promise","nbd/util/media","nbd/util/when","lib/scrollpoint","be/View/Basement","be/View/Dialog/Layover/Search"],function(e,t,n,i,o,r,s){"use strict";function a(e){var t=e.find("#navmenui-basement");d=new s,u=new r(t),u.rendered(),e.on("click","#search-button",function(){d.toggle()}).on("click","#hamburger-button",function(e){e.preventDefault(),u.toggle()}).on("click","#top-panel-blocking",function(e){e.preventDefault(),u.close()})}function l(e){e=e[0];var t;e.hasClass("logged-in")||(t=f.find("#site-content").offset().top+f.find("#sorts-container").outerHeight()+60,o(t,function(e){f.find("#navmenui-primary").toggleClass("scrolled",e)}))}var c,u,d,f,p={dom:new t,phone:new t,tablet:new t,desktop:new t};return n.on("phone:enter",p.phone.resolve).on("tablet:enter",p.tablet.resolve).on("desktop:enter",p.desktop.resolve),n.getState().forEach(function(e){p[e].resolve()}),i(p.dom,p.phone).then(function(e){return p.tablet.reject(),e[0]}).then(a),i(p.dom,p.tablet).then(function(e){return p.phone.reject(),e[0]}).then(a),i(p.dom,p.desktop).then(l),c={init:function(t){f=t||e(document.body),p.dom.resolve(f)}}}),define("lib/xhr",["jquery","nbd/trait/promise"],function(e,t){"use strict";return function(){var n=new t,i=e.ajax.apply(e,arguments);return n.resolve(i),n.thenable()}}),define("be/Controller/Dialog",["nbd/Controller/Entity","nbd/util/media"],function(e,t){"use strict";var n=e.extend({init:function(){this._super.apply(this,arguments),this.mediaView=this.mediaView.bind(this),t.on("all",this.mediaView)},destroy:function(){t.off(null,this.mediaView),this._view&&this._view.destroy(),this._model.destroy()},_initView:function(e,n){var i,o=t.getState();i="function"==typeof e?e:o.map(function(t){return e[t]}).filter(function(e){return!!e})[0],"function"==typeof i&&(this._view=this._view=new i(n),this._view._controller=this._view._controller=this)},render:function(){return this._view&&this._view.render.apply(this._view,arguments)},mediaView:function(e,t){var n=this.constructor.VIEW_CLASS[e];n&&t&&this.requestView(n)},switchView:function(e){var t=this._view;return this._initView(e,this._model),t&&t.destroy()}});return n}),define("be/Controller/Dialog/Roulette",["jquery","be/Controller/Dialog","nbd/util/async"],function(e,t,n){"use strict";var i=t.extend({$context:null,setContext:function(e){this.$context&&this.$context.off("click"),this.$context=e.on("click",function(e){e.isDefaultPrevented()||e.originalEvent.data===this._view||this.toggle(e.delegateTarget)}.bind(this))},render:function(e){var t=this._view.render(document.body);return this._view.position(e),t},toggle:function(e){this._view.$view&&this._view.$view.length?(this._view.toggle(),this._view.position(e)):(this.render(e||this.$context),n(this._view.show.bind(this._view)))}});return i}),define("lib/gaq",{page:function(e){try{void 0!==_gaq&&_gaq.push(["_trackPageview",e||location.href])}catch(t){}},event:function(){try{if("undefined"!=typeof _gaq){var e=Array.prototype.slice.call(arguments);e.unshift("_trackEvent"),_gaq.push(e)}}catch(t){}},customVar:function(e,t,n){if(e&&t&&void 0!==n)try{if("undefined"!=typeof _gaq){var i=Array.prototype.slice.call(arguments);i.unshift("_setCustomVar"),_gaq.push(i)}}catch(o){}}}),define("be/View/Follow",["jquery","nbd/View"],function(e,t){"use strict";var n=t.extend({init:function(e,t){this.$view=e,this._model=t,this.rendered()},destroy:function(){this._model.off(null,null,this)},rendered:function(){var t=this;this._model.on("following",function(t){this.$view.toggleClass("following",t),t&&this.$view.addClass("following-hold").one("mouseleave",function(){e(this).removeClass("following-hold")})},this),this.$view.on("click",function(){var n=e(this).data(),i={backfill:n.backfill};t._controller.follow(i)})},updateCount:function(e){var t=this.$view.parent().find(".gallery-stats-followers-count"),n=+t.html()+e;t.html(n>0?n:0)}});return n}),define("be/Controller/Follow",["jquery","nbd/Controller","nbd/Model","nbd/trait/pubsub","be/View/Follow","lib/gaq","lib/xhr"],function(e,t,n,i,o,r,s){"use strict";var a=t.extend({init:function(e,t,i){this.views=[],this.type=i||"user",this._model=new n(e,{blocking:!1,following:t||!1}),this.listenTo(this._model,"all",this.trigger)},_initView:function(e){var t=new o(e,this._model);return t._controller=this,t},add:function(e){if(e.data("befollow"))return this;var t=this._initView(e);return e.data("befollow",t),this.views.push(t),this},update:function(e){var t=e?1:-1;this.views.forEach(function(e){e.updateCount(t)})},follow:function(e){function t(){i.set("blocking",!1)}if(!this._model.get("blocking")){var n,i=this._model,o=this._model.get("following"),a=this.constructor.url(this.type,this._model.id()),l=o?"DELETE":"POST";return this._model.set("blocking",!0),n=s({url:a,type:l,data:e}).then(function(){i.set("following",!o),r.event("follow",window.location.pathname,window.location.search)}),this.trigger("request",n),n.then(t,t),n}},destroy:function(){this.views.forEach(function(e){e.destroy()}),this.views=[],this._model.destroy(),this._model=null}},{RELATIONS_URL:"/relations",DATA_KEY:{user:"followee",collction:"list_id",site:"site_id"},url:function(e,t){return this.RELATIONS_URL+"/"+e+"/"+t+window.location.search}}).mixin(i);return a}),define("be/follow",["jquery","nbd/util/extend","nbd/trait/pubsub","be/Controller/Follow"],function(e,t,n,i){"use strict";var o={users:{},collections:{},sites:{}},r=function(e,t,n){var o=new i(t,n,e);return this.listenTo(o,"following",function(e){this.trigger("following",t,e)}).listenTo(o,"request",function(e){this.trigger("request",t,e)}),o},s=function(e,t,n,i){var s=e.data(t)||+e.attr(t);s&&(o[i][s]=(o[i][s]||r.call(a,n,s,e.hasClass("following"))).add(e))},a={init:function(e){this.users(e),this.collections(e),this.sites(e)},users:function(t){var n=this;e(".action-follow-user",t).each(function(){n.followUser(e(this))})},collections:function(t){var n=this;e(".action-follow-collection",t).each(function(){n.followCollection(e(this))})},sites:function(t){var n=this;e(".action-follow-site",t).each(function(){n.followSite(e(this))})},followUser:function(e){s(e,"followee","user","users")},followCollection:function(e){s(e,"list_id","collection","collections")},followSite:function(e){s(e,"site_id","site","sites")},getUser:function(e){return o.users[e]},getCollection:function(e){return o.collections[e]},getSite:function(e){return o.sites[e]},usersFollowed:function(){return Object.keys(o.users).filter(function(e){return o.users[e]._model.get("following")}).length}};return t(a,n),a}),define("be/View/Dialog/Menu",["jquery","be/View/Dialog","nbd/util/async","jquery/ui/position"],function(e,t,n){"use strict";var i=t.extend({init:function(){this._super.apply(this,arguments),this.dismiss=function(e){e.originalEvent.data!==this&&(this.hide(),e.preventDefault())}.bind(this)},destroy:function(){this._unbind(),this._super.apply(this,arguments)},template:function(t){return this._super(e.extend({dialogType:"menu",blocking:!1,hide_toolbar:!0},t))},rendered:function(){this._super();var e=this;this.$view.on("click touchend",function(t){t.originalEvent.data=e})},_bind:function(){e("html").on("click touchend",this.dismiss)},_unbind:function(){e("html").off("click touchend",this.dismiss)},position:function(t,n){if(this.$view){t&&(this._lastContext=t);var i={my:"left top",at:"left bottom+10",of:this._lastContext,collision:"flipfit"};this.$view.position(e.extend(i,n))}},show:function(){return this.$view?(n(this._bind.bind(this)),this.$view.addClass("shown"),this._super()):void 0},hide:function(){return this.$view?(this._unbind(),this.$view.removeClass("shown"),this._super()):void 0},toggle:function(){return this[this.$view.hasClass("shown")?"hide":"show"]()}});return i}),define("require/hgn!templates/miniProfile",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.s(i.f("user",e,t,1),e,t,0,9,1962,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('<div class="mini-profile-wrap hide-phone hide-tablet cfix">'),i.b("\n"),i.b("\n"+n),i.b('  <div class="user-info-container cfix">'),i.b("\n"+n),i.b('    <a target="_blank" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="user-image-wrap user-image-link">'),i.b("\n"+n),i.b('      <img src="'),i.b(i.v(i.d("images.115",e,t,0))),i.b('" class="user-image">'),i.b("\n"+n),i.b("    </a>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="user-info">'),i.b("\n"+n),i.b('      <a target="_blank" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="user-name">'),i.b(i.v(i.f("display_name",e,t,0))),i.b("</a>"),i.b("\n"),i.b("\n"+n),i.b('      <span class="location be-font-inline">J</span>'),i.b("\n"+n),i.b('      <a target="_blank" href="'),i.b(i.v(i.d("location.link",e,t,0))),i.b('" class="location-link">'),i.b(i.v(i.f("city",e,t,0))),i.s(i.f("state",e,t,1),e,t,0,504,515,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(", "),n.b(n.v(n.f("state",e,t,0)))}),e.pop()),i.s(i.f("country",e,t,1),e,t,0,537,550,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(", "),n.b(n.v(n.f("country",e,t,0)))}),e.pop()),i.b("</a>"),i.b("\n"+n),i.b("    </div> <!-- .user-info -->"),i.b("\n"+n),i.b("  </div> <!-- .user-info-container -->"),i.b("\n"),i.b("\n"+n),i.b("  "),i.b(i.t(i.f("follow",e,t,0))),i.b("\n"),i.b("\n"+n),i.s(i.d("projects.0",e,t,1),e,t,0,671,1313,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('  <a target="_blank" href="'),i.b(i.v(i.f("url",e,t,0))),i.b('" class="cfix user-view-link gallery-projects-wrap">'),i.b("\n"+n),i.b('    <ul class="project-cover-container">'),i.b("\n"+n),i.s(i.f("projects",e,t,1),e,t,0,815,920,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <li class="project-cover-wrap">'),i.b("\n"+n),i.b('        <img src="'),i.b(i.v(i.f("cover",e,t,0))),i.b('" class="project-cover">'),i.b("\n"+n),i.b("      </li>"),i.b("\n"+n)}),e.pop()),i.b("  "),i.s(i.d("projects.1",e,t,1),e,t,1,0,0,"")||i.b('<li class="project-cover-wrap"></li>'),i.b("\n"+n),i.b("  "),i.s(i.d("projects.2",e,t,1),e,t,1,0,0,"")||i.b('<li class="project-cover-wrap"></li>'),i.b("\n"+n),i.b("    </ul> <!-- .project-cover-container -->"),i.b("\n"+n),i.b('    <span class="gallery-cover-overlay">'),i.b("\n"+n),i.b('      <div class="gallery-cover-overlay-text">View Profile&nbsp;<span class="rarr">&rarr;</span></div>'),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.b("  </a> <!-- .gallery-projects-wrap -->"),i.b("\n"+n)}),e.pop()),i.b("\n"+n),i.s(i.f("stats",e,t,1),e,t,0,1342,1916,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('  <div class="stats-wrap">'),i.b("\n"),i.b("\n"+n),i.b('    <span class="cover-stat cover-stat-views">'),i.b("\n"+n),i.b('      <span class="stat-label be-font-inline">G</span>'),i.b("\n"),i.b("\n"+n),i.b('      <span class="stat-value">'),i.b(i.v(i.f("views",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"),i.b("\n"+n),i.b('    <span class="cover-stat cover-stat-appreciations">'),i.b("\n"+n),i.b('      <span class="stat-label be-font-inline">F</span>'),i.b("\n"),i.b("\n"+n),i.b('      <span class="stat-value">'),i.b(i.v(i.f("appreciations",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"),i.b("\n"+n),i.b('    <span class="user-stat user-stats-followed">'),i.b("\n"+n),i.b('      <span class="stat-label be-font-inline">I</span>'),i.b("\n"),i.b("\n"+n),i.b('      <span class="stat-value">'),i.b(i.v(i.f("followers",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("    </span>"),i.b("\n"+n),i.b("  </div> <!-- .stats-wrap -->"),i.b("\n"+n)}),e.pop()),i.b("</div> <!-- .mini-profile-wrap -->"),i.b("\n"+n)}),e.pop()),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/MiniProfile",["jquery","lib/gaq","be/follow","be/View/Dialog/Menu","hgn!templates/miniProfile"],function(e,t,n,i,o){"use strict";var r=i.extend({mustache:o,template:function(t){return this._super(e.extend({classes:["mini-profile","hide-tablet","hide-phone"]},t))},position:function(){var e,t,n,i=this._controller.$context.width()/2,o=this.constructor.NUB_OFFSET-i,r=0>o?"+":"-";this._super(this._controller.$context,{my:"left top",at:"left"+r+Math.abs(o)+" bottom+"+this.constructor.NUB_HEIGHT,collision:"flipfit",within:this._model.get("within")}),e=this._controller.$context.offset(),t=this.$view.offset(),this._model.get("bottom")&&t.top+this.$view.height()>this._model.get("bottom").offset().top?(this._super(this._controller.$context,{my:"left"+r+Math.abs(o)+" bottom-"+this.constructor.NUB_HEIGHT,at:"left top",collision:"flipfit none",within:this._model.get("within")}),n="bottom"):n=e.top>t.top?"bottom":"top",n+=Math.floor(e.left)>t.left+Math.abs(o)?"-right":"-left",this.$view.removeClass("top-right top-left bottom-right bottom-left").addClass(n)},rendered:function(){this._super(),n.init(this.$view),e(document.body).hasClass("logged-out")?this.$view.on("click",".action-follow-user",this.hide.bind(this)):(this.$view.on("click",".form-button-follow",function(){t.event("mini_profile","follow_button","followed_user")}),this.$view.on("click",".form-button-unfollow",function(){t.event("mini_profile","follow_button","unfollowed_user")}))},show:function(){this._super(),t.event("mini_profile","mini_profile_shown",window.location.pathname),this._controller.$context.closest(":focusable").focus()},_bind:e.noop,_unbind:e.noop},{NUB_OFFSET:55,NUB_HEIGHT:12});return r}),define("be/Controller/MiniProfile",["jquery","be/Controller/Dialog/Roulette","be/View/MiniProfile"],function(e,t,n){"use strict";var i=t.extend({init:function(){this._super.apply(this,arguments),this._view.on("postrender",function(e){this.bindHide(e)}.bind(this)),this.keepAlive=this.keepAlive.bind(this),this.setDeath=this.setDeath.bind(this)},bindHide:function(e){e=e||this.$context,e.on({mouseenter:this.keepAlive,mouseleave:this.setDeath,click:this.setDeath})},setContext:function(e){this.$context&&this.$context.off({mouseenter:this.keepAlive,mouseleave:this.setDeath,click:this.setDeath}),this.$context=e,this.bindHide()},keepAlive:function(){clearTimeout(this.hideTimeout)},setDeath:function(){this.hideTimeout=setTimeout(function(){this._view.hide()}.bind(this),this.constructor.HIDE_TIMEOUT)}},{VIEW_CLASS:n,HIDE_TIMEOUT:500});return i}),define("require/css!styles/profile/mini",[],function(){}),define("be/miniprofile",["jquery","lib/xhr","nbd/trait/promise","be/Controller/MiniProfile","css!styles/profile/mini"],function(e,t,n,i){"use strict";function o(t,n,i){t=t||e(document.body),c=n||e(window),l=i;var o,r,d;t.on("mouseenter",".js-mini-profile",function(){var t=e(this);o=t.data("id"),clearTimeout(r),r=setTimeout(function(){t.addClass("wait"),d=s(o),d.then(function(e){t.removeClass("wait"),a(t,e)})},u)}).on("mouseleave",".js-mini-profile",function(){clearTimeout(r),d&&(d.reject(),d=null)})}function r(t){t=t||e(document.body),t.off("mouseenter mouseleave",".js-mini-profile"),e.each(d,function(e,t){t.destroy()})}function s(e){s._cache=s._cache||{};var i,o;return(o=s._cache[e])?(i=new n,i.resolve(o),i):t({url:"/profile/mini/"+e}).then(function(t){return s._cache[e]=t,t})}function a(t,n){var o,r=n.user.id;t.parents(".popup").length?(n.within=e(window),n.bottom=null):(n.within=c,n.bottom=l),d[r]=d[r]||new i(n),o=d[r],o.setContext(t),o.render(t),o._view.show()}var l,c,u=500,d={};return{init:o,destroy:r}}),define("lib/keyboard",["jquery","nbd/Class"],function(e,t){"use strict";var n=new(t.extend({listeners:null,globals:null,ignoredElements:{INPUT:!0,TEXTAREA:!0},init:function(t){t=t||{},this.globals=t.global||{},this.listeners=[],this.ignoredElements=e.extend({},this.ignoredElements),this.addListener=this.addListener.bind(this),this.appendListener=this.appendListener.bind(this),this.removeListener=this.removeListener.bind(this),this.addGlobal=this.addGlobal.bind(this),this.keydownHandler=this.keydownHandler.bind(this),e(document.body).on("keydown",this.keydownHandler)},destroy:function(){e(document.body).off("keydown",this.keydownHandler)},translate:function(t,n){function i(e,t){return function(n){var i=e.map(function(e){return e?e.toLowerCase()+"Key":null}).reduce(function(e,t){return e&&(t?n.originalEvent[t]:!0)},!0);return i?t.call(this,n):void 0}}var o,r,s,a=/^((?:(?:meta|shift|ctrl|alt)-)*)(.+)$/i;n=n||{};for(o in t)if(t.hasOwnProperty(o)){if(s=a.exec(o),!s)continue;r=this.constructor.keyCodes[s[2].toLowerCase()],r&&(n[r]=n[r]||e.Callbacks("unique stopOnFalse"),n[r].add(s[1]?i(s[1].split("-"),t[o]):t[o]))}return n},addListener:function(e){this.listeners.push(this.translate(e))},appendListener:function(e){this.listeners.length||this.listeners.push({}),this.translate(e,this.listeners[this.listeners.length-1])},removeListener:function(){this.listeners.pop()},addGlobal:function(e){this.translate(e,this.globals)},keydownHandler:function(e){var t=this.listeners.length?this.listeners[this.listeners.length-1]:{};(t.hasOwnProperty(e.which)||this.globals.hasOwnProperty(e.which))&&(!t[e.which]||!this.constructor.bypassCodes[e.which]&&this.ignoredElements[e.target.tagName]||t[e.which].fire(e),this.globals[e.which]&&this.globals[e.which].fire(e))},keyupHandler:function(){}},{keyCodes:{backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},bypassCodes:{16:!0,17:!0,18:!0,19:!0,20:!0,27:!0,45:!0,112:!0,113:!0,114:!0,115:!0,116:!0,117:!0,118:!0,119:!0,120:!0,121:!0,122:!0,123:!0}}));return{on:n.addListener,off:n.removeListener,add:n.appendListener,global:n.addGlobal}}),define("be/View/Dialog/Popup",["nbd/util/extend","be/View/Dialog","lib/keyboard"],function(e,t,n){"use strict";var i=t.extend({template:function(t){return this._super(e({dialogType:"desktop",blocking:!0,toolbar:!0},t))},render:function(){return i.Z_INDEX+=2,this._zIndex=i.Z_INDEX,this._super.apply(this,arguments)},rendered:function(){this._super(),this.$view.filter(".blocking-div").on("click",this.hide.bind(this))},position:function(){if(this.$view){var e=this.$view.filter(".popup"),t=window.innerHeight||document.documentElement.offsetHeight,n=(t-e.outerHeight())/2;e.css({"z-index":this._zIndex,"margin-left":-~~(e.width()/2)+"px",top:n>0?n:void 0}).addClass("shown"),this.$view.filter(".blocking-div").css({"z-index":this._zIndex-1})}},show:function(){return this.$view?(n.on({escape:this.hide.bind(this)}),this.$view.parent().is(document.body)||this.$view.appendTo(document.body),this._super()):void 0},hide:function(){return this.$view?(n.off(),this.$view.detach(),this._super()):void 0},toggle:function(){var e=this.$view.parent().is(document.body);return this[e?"hide":"show"]()}},{Z_INDEX:250});return i}),define("require/hgn!templates/html",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b(i.t(i.f("html",e,t,0))),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/Modal",["nbd/trait/promise","nbd/util/extend","be/Controller/Dialog","be/View/Dialog/Layover","be/View/Dialog/Popup","hgn!templates/html"],function(e,t,n,i,o,r){"use strict";var s={mustache:r,templateData:function(){return t({buttons:[{label:"Okay",classes:["form-button-default","js-confirm"]},{label:"Cancel",classes:["form-button-cancel","js-cancel"]}]},this._model.data())},rendered:function(){this._super(),this.$view.on("click",".js-confirm",this.trigger.bind(this,"confirm")).on("click",".js-cancel",this.trigger.bind(this,"cancel"))}},a=i.extend(s),l=o.extend(s),c=n.extend({init:function(){this._super.apply(this,arguments),this._view.on("confirm",function(){this.confirm.apply(this,arguments)},this).on("hide",function(){this.cancel.apply(this,arguments)},this)},confirm:function(){this.resolve()},cancel:function(){this.reject()},render:function(){this._super(document.body),this._view.position()}},{VIEW_CLASS:{phone:a,tablet:l,desktop:l}}).mixin(e);return c}),define("be/modal/simple",["be/Modal"],function(e){"use strict";return function(t,n){var i=new e(t),o=i.destroy.bind(i);return"function"==typeof n&&(i.confirm=function r(){function e(){r.blocking=!1}if(!r.blocking){r.blocking=!0;var t=n();t&&"function"==typeof t.then?t.then(i.resolve.bind(i)).then(e,e):(i.resolve(t),e())}}),i.render(),i.then(o,o),i}}),define("be/spam",["lib/xhr","be/modal/simple"],function(e,t){"use strict";function n(n,r,s){t({title:"Mark as Spam",html:"Are you sure you want to mark this "+o[n]+" as spam?"}).then(function(){e({type:"POST",url:i+n+"/"+r}).then(function(){s&&s.text("Marked as Spam")})})}var i="/v2/report/spam/",o={user:"person",project:"project",wip:"work in progress",projectcomment:"comment",wip_revisioncomment:"comment",message:"message"};return{report:n}}),define("lib/form/decompose",[],function(){"use strict";function e(e){return e.reduce(function(e,t){var n=e[t.name];return e[t.name]=n?[].concat(n,t.value):t.value,e},{})}return e}),define("lib/form",["nbd/Class","nbd/trait/promise","lib/form/decompose","lib/xhr"],function(e,t,n,i){"use strict";var o=function(e){switch(e.which){case 1:case 13:case 32:this.$form.submit()}},r=function(e){e.preventDefault();var i=new t,o={url:this.$form.attr("action"),type:this.$form.attr("method")||"POST",data:n(this.$form.serializeArray())};this._submit(i),i.resolve(o)},s=e.extend({init:function(e){this.$form=e,this._normalizeSubmitter=o.bind(this),this._initChain=r.bind(this),this._bindSubmission()},destroy:function(){this._unbindSubmission(),this.$form=null},commit:function(){return this},_submit:function(e){return e.then(function(e){var n,o=new t,r=o.thenable();return n=this.commit.call(r,e),o.resolve(n===r?i(e):n),o}.bind(this))},_bindSubmission:function(){this.$form.on("click keydown",".form-submit:not([type=submit])",this._normalizeSubmitter).on("submit",this._initChain)},_unbindSubmission:function(){this.$form.off("click keydown",".form-submit:not([type=submit])",this._normalizeSubmitter).off("submit",this._initChain)}});return s}),define("lib/showMessages",["jquery"],function(e){"use strict";function t(t,n,i){i=e.extend({fade:!0,floating:!1,prepend:!1},i);var o=t.find(".messages"),r=[];o.length||(o=e('<div class="messages"></div>').hide().addClass(i.classes||""),i.floating&&o.addClass("messages-floating"),i.prepend?o.prependTo(t):o.appendTo(t)),n.forEach(function(e){e.type=e.type||"message";var t;switch(e.type){case"error":case"message":case"success":break;default:throw'"'+e.type+'" is not a valid message type'}t='<div class="'+e.type+'"><span class="icon-status-'+e.type+' icon sprite-site-elements"></span>'+e.message+"</div>",r.push(t)}),o.html(r.join("")).show(),i.fade&&o.delay(5e3).fadeOut(1e3)}return t}),define("lib/tooltip",["jquery"],function(e){"use strict";function t(t,n,i){var o,r;return i=i||[],o=t.closest(".js-form-item, .form-item"),o.length||(o=t),r=e("<div>"+n+"</div>").addClass(i.join(" ")).appendTo(o),r.css("top",-(r.outerHeight()+8-t.position().top)),o.addClass("form-item-error"),r
}return t}),define("be/handleResponse",[],function(){"use strict";function e(e,t,n){if("string"==typeof t&&(t.messages=[{type:"success",message:t}]),"string"==typeof t.responseText&&(t=t.responseJSON),t||(t={},n=!0),!t.messages&&t.errors){t.messages=[];for(var i in t.errors)t.messages.push({type:"error",message:t.errors[i]})}return!t.messages&&n&&(t.messages=e),t}function t(t,n){var i=[{type:"success",message:"Success"}];return e(i,t,n)}function n(t,n){var i=[{type:"error",message:"Unknown server error"}];return e(i,t,n)}return{success:t,error:n}}),define("be/form/errors",["jquery","has","nbd/util/media","lib/showMessages","lib/tooltip","be/handleResponse"],function(e,t,n,i,o,r){"use strict";function s(e){e.find("."+u.join(".")).remove(),e.find(f).removeClass(f)}function a(e,t){t=t.errors||t;var i=n.is("desktop")?u:d;Object.keys(t).forEach(function(n){var r=e.find("[name="+n+"]");r.length&&o(r,t[n],i)})}function l(n){return function(){var i=(t("input-event")?"input":"keypress")+" change";n.on(i,"input, textarea, select",function(){var t=e(this).closest(".form-item");t.children(".form-error").remove(),t.removeClass("form-item-error")})}}function c(t){return function(n){return n instanceof Error?void console.error(n):(console.warn(n),n=r.error(n),n.messages&&i(t,n.messages),s(t),a(t,n),void e(document.body).animate({scrollTop:0},500))}}var u=["form-error"],d=["form-error","form-error-right"],f=".form-item-error";return{display:c,cleanup:l}}),define("lib/validate",[],function(){"use strict";function e(e){var t,n,i=!1,o=0,r=[];for(t=0;t<e.length;++t)"["!==e[t]?"]"!==e[t]?","!==e[t]||i||(n=e.substring(o,t),n&&r.push(n),o=t+1):i=!1:i=!0;return n=e.substring(o),n&&r.push(n),r}function t(i,o){var r;return delete t.message,o=o?e(o):[],i=null===i||void 0===i?"":i,r=o.indexOf("optional"),r>-1?(o.splice(r,r+1),!i||o.every(n,i)):o.every(n,i)}var n,i=RegExp.prototype.test,o={Generic:{test:i.bind(/^[^<>]+$/),message:"This field may not contain less than signs (&lt) or greater than signs (&gt;)"},AlphaNumeric:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),message:"This field must contain only alphanumeric characters"},Alpha:{test:i.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F]+$/),message:"This field must contain only alpha characters"},AlphaDash:{test:i.bind(/^[A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),message:"This field must contain only alpha characters or dashes"},ANDash:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+$/),message:"This field must contain only alphanumeric characters or dashes"},ANUnder:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_]+$/),message:"This field must contain only alphanumeric characters with or without underscores"},ANUSpace:{test:i.bind(/^[0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F_ ]+$/),message:"This field must contain only alphanumeric characters with or without underscores and spaces"},ANEmail:{test:i.bind(/^([_\dA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\-]+|[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))$/),message:"This field must contain a valid username or email"},Integer:{test:i.bind(/^\-?\d+$/),message:"This field must only contain numbers, without any spaces"},CreditCardNumber:{test:i.bind(/^\d{13,16}$/),message:"This field must only contain numbers, without any spaces or dashes"},Decimal:{test:i.bind(/^\-?\d+(\.\d+)?$/),message:"This field must be a valid decimal number"},Date:{test:i.bind(/^\d{1,2}\-\d{1,2}-\d{4}( \d{2}:\d{2}:\d{2})?$/),message:"This field must be a valid date"},SqlDate:{test:i.bind(/^\d{4}\-\d{2}\-\d{2}$/),message:"This field must be a valid date"},SqlDateTime:{test:i.bind(/^\d{4}\-\d{2}\-\d{2}\s\d{2}\:\d{2}\:\d{2}$/),message:"This field must be a valid datetime"},SlashDate:{test:i.bind(/^\d{1,2}\/\d{1,2}\/\d{4}$/),message:"This field must be a valid date"},Email:{test:i.bind(/^[\w\.\+\-]+@(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/),message:"This field must be a valid email address"},Name:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),message:"This field must be a valid name"},Username:{test:i.bind(/^[A-Za-z0-9_\-]+$/),message:"This field contains invalid characters. Please use only letters, numbers, dash or underscore characters."},Password:{test:i.bind(/^\S{6,32}$/),message:"This field must be between 6 and 32 characters"},Address:{test:i.bind(/^[\w0-9A-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F# \' \.\,\&\-]+$/),message:"This field must be a valid address"},City:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F \' \. \-]+$/),message:"This field must be a valid city"},Province:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F ]+$/),message:"This field must be a valid province"},IntZip:{test:i.bind(/^[A-Za-z0-9#\. \-]+$/),message:"This field must be a valid zipcode"},UsZip:{test:i.bind(/^\d{5}(\-\d{4})?$/),message:"This field must be a valid US zipcode"},Country:{test:i.bind(/^[\wA-Za-z\u00C0-\u00FF\u0100-\u0259\u0386\u0388-\u04E9\u05D0-\u06D3\u1E80-\u200F\'. \-]{2,50}$/),message:"This field must be a valid country"},IntPhone:{test:i.bind(/^[0-9\+ \(\)\#\-]+$/),message:"This field must be a valid phone"},UsPhone:{test:i.bind(/^\d{3}\-\d{3}\-\d{4}$/),message:"This field must be a valid US phone"},PicExt:{test:i.bind(/^((jpg)|(jpeg)|(png)|(gif)){1}$/),message:"This field must be a valid image extension"},VideoExt:{test:i.bind(/^((mpg)|(mpeg)|(mov)|(avi)|(dv)|(qt)|(asf)|(flv)){1}$/),message:"This field must be a valid video extension"},Url:{test:i.bind(/^(http(?:s)?:\/\/|www.)[^<>]*$/),message:"This field must be a URL starting with http:// or www."},UrlExt:{test:i.bind(/^((?:https?):\/\/)?(?:(?:(?:[\w\.\-\+!$&\'\(\)*\+,;=_]|%[0-9a-f]{2})+:)*(?:[\w\.\-\+%!$&\'\(\)*\+,;=]|%[0-9a-f]{2})+@)?(?:[A-Za-z0-9_\-]+\.)(?:[A-Za-z0-9\-\._])+(?::\d+)?(?:[\/|\?](?:[\w#!:\.\?\+=&@$\'~*,;_\/\(\)\[\]\-]|%[0-9a-f]{2})*)?$/),message:"This field must be a valid URL"},Html:{test:function(){return!i.apply(/<((?!\/?span|\/?h1|\/?h2|\/?h3|\/?h4|\/?h5|\/?h6|\/?a|\/?b|\/?ol|\/?ul|\/?li|\/?i|\/?em(?!bed)|\/?p|\/?div|\/?br|\/?unb|\/?uni|\/?\s|\/?\>)[^\>]*\>)/i,arguments)},message:"This field must be properly formed HTML"},Twitter:{test:i.bind(/^[A-Za-z0-9_\-]{1,15}$/),message:"This field must be a valid twitter username (without the @ character)"},required:{test:i.bind(/.+/),message:"This field is required"},length:{test:function(e,t){var n=/\[(,?\d+(?:,\d+)?)\]/.exec(t);return e=String(e).replace(/[\s]+/g," "),n?new RegExp("^.{"+n[1]+"}$").test(e):!1},message:function(e,t){var n;return(n=/\[(\d+),(\d+)\]/.exec(t))?"Must be between "+n[1]+" and "+n[2]+" characters.":(n=/\[,(\d+)\]/.exec(t))?"Must be at most "+n[1]+" characters.":(n=/\[(\d+),\]/.exec(t))?"Must be at least "+n[1]+" characters.":(n=/\[(\d+)\]/.exec(t),n?"Must be exactly "+n[1]+" characters.":void 0)}}},r=/(\w+)(.*)/;return n=function(e){var n,i=r.exec(e);return i&&(e=i[1],n=i[2]),o[e]&&o[e].test?(i=o[e].test(this,n),i||(t.message="function"==typeof o[e].message?o[e].message(this,n):o[e].message),i):!0},t}),define("be/form/validator",["lib/validate"],function(e){"use strict";function t(t){return function(n){var i={},o=n.data;if(Object.keys(o).forEach(function(n){var r=t.find('[name="'+n+'"]').data("validate");e(o[n],r)||(i[n]=e.message)},t),Object.keys(i).length)throw i;return n}}return t}),define("be/form",["jquery","nbd/trait/promise","lib/form/decompose","lib/form","lib/xhr","be/form/errors","be/form/validator"],function(e,t,n,i,o,r,s){"use strict";var a=i.extend({init:function(e){this.$context=e,this._super(e.is("form")?e:e.find("form"))},_submit:function(e){return e=e.then(s(this.$context)),this._super(e).then(null,function(e){r.display(this.$context)(e),r.cleanup(this.$context)()}.bind(this))},_bindSubmission:function(){this.$context.on("click keydown",".form-submit:not([type=submit])",this._normalizeSubmitter),this.$form.on("submit",this._initChain)},_unbindSubmission:function(){this.$context.off("click keydown",".form-submit:not([type=submit])",this._normalizeSubmitter),this.$form.off("submit",this._initChain)}});return a}),define("require/hgn!templates/message",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<form class="send-message">'),i.b("\n"+n),i.b('  <div class="message-subject form-item form-item-text">'),i.b("\n"+n),i.b('    <input name="subject" class="form-text form-text-normal" type="text" placeholder="Subject" data-validate="required,Generic">'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("body",e,t,1),e,t,0,235,249,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<textarea0",e,t,""))}),e.pop()),i.b("</form>"),i.b("\n"),i.fl()},partials:{"<textarea0":{name:"textarea",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/form/textarea",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="form-item form-item-textarea'),i.s(i.f("containerClasses",e,t,1),e,t,0,61,67,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('">'),i.b("\n"+n),i.b("  "),i.s(i.f("label",e,t,1),e,t,0,103,142,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('<label for="'),n.b(n.v(n.f("id",e,t,0))),n.b('">'),n.b(n.t(n.f("label",e,t,0))),n.b("</label>")}),e.pop()),i.b("\n"+n),i.b('  <textarea id="'),i.b(i.v(i.f("id",e,t,0))),i.b('" name="'),i.b(i.v(i.f("id",e,t,0))),i.b('" class="form-textarea'),i.s(i.f("classes",e,t,1),e,t,0,223,229,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('"'),i.b("\n"+n),i.b("    "),i.s(i.f("maxlength",e,t,1),e,t,0,261,287,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' maxlength="'),n.b(n.v(n.f("maxlength",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("placeholder",e,t,1),e,t,0,322,352,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' placeholder="'),n.b(n.v(n.f("placeholder",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("    "),i.s(i.f("autocomplete",e,t,1),e,t,0,390,422,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' autocomplete="'),n.b(n.v(n.f("autocomplete",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b('    data-validate="'),i.b(i.v(i.f("validate",e,t,0))),i.b('">'),i.b(i.v(i.f("value",e,t,0))),i.b("</textarea>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/trait/message",["be/form","hgn!templates/message","hgn!templates/form/textarea"],function(e,t,n){"use strict";return{mustache:t,partials:{textarea:n.template},templateData:function(){return{classes:["message"],title:"Message",buttons:[{label:"Send",classes:["form-button-default","form-submit"]},{label:"Cancel",classes:["form-button-cancel"]}],contactName:this._model.get("name"),body:{id:"message",placeholder:"Message",containerClasses:["message-body"],validate:"required,Generic",classes:["form-text-normal"]}}},rendered:function(){var t=this;this._form=new e(this.$view),this._form.commit=function(e){return this.then(function(){t.hide()}),t._controller.create(e.data.subject,e.data.message)},this.$view.on("click",".form-button-cancel",function(){this.$view.find(".form-text, .form-textarea").val("")}.bind(this)),this._super()}}}),define("be/Controller/Dialog/Message",["jquery","nbd/event","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Dialog/Menu","be/View/Dialog/Popup","be/trait/message"],function(e,t,n,i,o,r,s){"use strict";var a=n.extend({create:function(t,n){return e.ajax({url:"/inbox/compose",type:"POST",data:{from_profile:1,to_types:1,to_ids:this._model.get("id"),subject:t,inbox_message:n}})},render:function(t){e(document.body).hasClass("logged-in")&&(this.$source=e(t),this._model.set({id:this.$source.data("contact_id")||this.$source.attr("contact_id"),name:this.$source.data("contact_name")}),this._super(t))}},{VIEW_CLASS:{phone:i.extend(s),tablet:o.extend(s),desktop:r.extend(s).extend({templateData:function(){var e=this._super();return e.title="Send Message to "+e.contactName,e}})}});return a}),define("require/hgn!templates/project/collection",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b("<form>"),i.b("\n"+n),i.b('  <div class="form-item form-item-text form-item-siamese left">'),i.b("\n"+n),i.b('    <input type="text" placeholder="Create a New Collection"'),i.b("\n"+n),i.b('    name="collection" class="form-text">'),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b('  <div class="form-item form-item-a form-item-siamese left">'),i.b("\n"+n),i.b('    <a class="form-button form-submit form-button-light-and-grey">Add</a>'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <ul id="collection_ids" class="divided-list'),i.s(i.f("collections",e,t,1),e,t,1,0,0,"")||i.b(" empty"),i.b('">'),i.b("\n"+n),i.s(i.f("collections",e,t,1),e,t,0,433,511,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <li class="divided-item collection" data-key="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</li>"),i.b("\n"+n)}),e.pop()),i.b("  </ul>"),i.b("\n"+n),i.b("</form>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/collection",["jquery","hgn!templates/project/collection"],function(e,t){"use strict";return{mustache:t,title:"Collections",templateData:function(){return e.extend({classes:["collections"],title:this.title,button:{label:"Save",containerClasses:["left"],classes:["form-button-default","collections-save","form-button-small"]},buttons:[{label:"Save",classes:["form-button-default","collections-save"]}]},this._model.data())},rendered:function(){this._super(),this.bindSelections(),this.newCollection(),this.saveCollections()},saveCollections:function(){this.$view.on("click",".collections-save",function(){this._controller.update(),this.hide()}.bind(this))},newCollection:function(){var e=this.$view.find("form");e.on("submit",function(){var t=e.serializeArray(),n=t[0].value;return this._controller.create(n).then(function(){this.destroy(!0),this.render(),this.show(),this.position()}.bind(this)),!1}.bind(this)).on("click",".form-submit",function(){e.submit()})},bindSelections:function(){var t=this;this.select(this._model.get("project_collection_ids")),this.listenTo(this._model,"project_collection_ids",this.select),this.$view.on("click",".collection",function(){var n,i=e(this).data("key"),o=t._model.get("project_collection_ids");~(n=o.indexOf(i))?o.splice(n,1):o.push(i),t._model.trigger("project_collection_ids",o)})},select:function(e){return this.$view.find(".collection").removeClass("active"),e&&e.forEach(function(e){this.$view.find(".collection[data-key="+e+"]").addClass("active")},this)}}}),define("project/Controller/Collection",["log","moment","lib/xhr","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Dialog/Menu","be/View/Dialog/Popup","project/trait/collection"],function(e,t,n,i,o,r,s,a){"use strict";e=e.get("Project Collection"),e.error=e.error.bind(e);var l=i.extend({create:function(e){return n({url:"/collection/create",type:"POST",data:{collection_name:e}}).then(function(n){var i=n.id,o=+t().format("X");if(!i)throw n;return{id:i,title:e,owners:[],url:"/collection/"+encodeURIComponent(e)+"/"+i,created_on:o,modified_on:o}}).then(function(e){return this._model.get("collections").unshift(e),this._model.get("project_collection_ids").unshift(e.id),this.update(),e}.bind(this))},read:function(){var t=n({url:"/gallery/collections/"+this._model.id()}).then(function(e){if(!e.project_collection_ids)throw e;return e.collections.sort(function(t,n){return e.project_collection_ids.indexOf(+n.id)-e.project_collection_ids.indexOf(+t.id)}),e});return t.then(this._model.set.bind(this._model),e.error),t},update:function(){return n({url:"/collection/project/"+this._model.id(),type:"POST",data:{collection_ids:this._model.get("project_collection_ids").join("|")}}).then(null,e.error)},render:function(){var e=this,t=this._super,n=arguments;this.read().then(function(){t.apply(e,n)}).then(this._view.show.bind(this._view))}},{VIEW_CLASS:{phone:o.extend(a),tablet:r.extend(a),desktop:s.extend(a).mixin({title:"Add to Collections"})}});return l}),define("be/trait/form/list",["jquery"],function(e){"use strict";function t(t,n){var i=e("<select>",{name:t[0].id,multiple:n||!1}).hide();return n||e("<option>",{selected:!0,disabled:!0}).appendTo(i),t.children("li").each(function(){e("<option>",{value:e(this).data("value")}).appendTo(i)}),i.insertAfter(t),i}function n(n,i){n.each(function(){var o=t(e(this).on("click",">li",function(){var t=e(this),r=t.data("value"),s=o.find('[value="'+r+'"]'),a=!s.prop("selected");s.prop("selected",a),a=s.prop("selected"),(i?n.find('[data-value="'+r+'"]'):t.siblings().removeClass("active").end()).toggleClass("active",a)}),i)})}return{selectList:function(e){n(e||this.$view.find("ul,ol"),!1)},multiList:function(e){n(e||this.$view.find("ul,ol"),!0)}}}),define("be/trait/form/toggle",["jquery"],function(e){"use strict";function t(t){var n=e("<input>",{type:"checkbox",name:t[0].id,value:"1",checked:t.hasClass("active")}).hide();return n.insertAfter(t),n}return{toggleElement:function(n){n.each(function(n){var i=t(n=e(this).on("click",function(){var e=!i.prop("checked");i.prop("checked",e).change(),n.toggleClass("active",e)}))})}}}),define("be/trait/form/submit",["jquery","nbd/trait/promise","nbd/util/media","lib/validate","lib/tooltip","lib/showMessages"],function(e,t,n,i,o,r){"use strict";function s(e,t){var n=e[t.name];return e[t.name]=n?[].concat(n,t.value):t.value,e}var a=function(e){var t={};if(Object.keys(e).forEach(function(n){var o=this.find('[name="'+n+'"]').data("validate");i(e[n],o)||(t[n]=i.message)},this),Object.keys(t).length)throw t;return e};return{continuousValidation:function(){var t=this.$view.find("input, textarea");t.each(function(){var t=e(this),n=t.data("validate");t.on("blur",function(){t.parent().find(".form-error").remove(),i(t.val(),n)||o(t,i.message)})})},onSubmit:function(i,l,c){l=l||this.$view;var u=l.is("form")?l:l.find("form");l.on("click keydown",".form-submit:not([type=submit])",function(e){switch(e.which){case 1:case 13:case 32:u.submit()}}),u.on("submit",function(l){var d=new t,f=u.serializeArray().reduce(s,{}),p={url:u.attr("action"),type:u.attr("method")||"POST"};return l.originalEvent=l.originalEvent||{},u.find(".form-error").remove(),u.find(".form-item-error").removeClass("form-item-error"),l.originalEvent.promise=(l.isDefaultPrevented()&&!u.attr("onsubmit")?d:d.then(a.bind(u))).then(function(n){if(p.data=n,"function"!=typeof i)return e.ajax(p);var o=new t,r=o.thenable(),s=i.call(r,n);return o.resolve(s===r?e.ajax(p):s),o}).then(function(){c||u.find(":input").val("").removeAttr("checked selected")},function(e){var t,i;if(e instanceof Error)return void console.error(e);throw e.responseJSON&&(e=e.responseJSON),e.messages&&r(u,e.messages),console.warn(e),t=e.errors||e,i=n.is("desktop")?["form-error"]:["form-error","form-error-right"],Object.keys(t).forEach(function(e){o(u.find("[name="+e+"]"),t[e],i)}),e}),d.resolve(f),!1})},onCancel:function(e){this.$view.on("click",".form-button-cancel",function(){this.$view.find(".form-text, .form-textarea").val(""),"function"==typeof e&&e()}.bind(this))}}}),define("be/trait/form",["nbd/util/extend","be/trait/form/list","be/trait/form/toggle","be/trait/form/submit"],function(e,t,n,i){"use strict";return e({},i,t,n)}),define("lib/recaptcha",["nbd/trait/promise"],function(e){"use strict";return function(t,n,i,o){var r=new e;return"object"!=typeof i&&(o=i,i={}),o=o||"//www.google.com/recaptcha/api/js/recaptcha_ajax.js",require([o],function(){Recaptcha.create(t,n,i),r.resolve(Recaptcha)},r.reject),r.thenable()}}),define("require/hgn!templates/project/report",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="project-report">'),i.b("\n"+n),i.b('  <div class="header-text">Report</div>'),i.b("\n"+n),i.b("  <form>"),i.b("\n"+n),i.b('    <ul id="reason" class="divided-list menu-section">'),i.b("\n"+n),i.s(i.f("options",e,t,1),e,t,0,151,232,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <li class="divided-item reason" data-value="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b(i.v(i.f("reason",e,t,0))),i.b("</li>"),i.b("\n"+n)}),e.pop()),i.b("    </ul>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.s(i.f("comments",e,t,1),e,t,0,306,320,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<textarea0",e,t,""))}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.s(i.f("email",e,t,1),e,t,0,393,403,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<text1",e,t,""))}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.s(i.f("captcha",e,t,1),e,t,0,442,824,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <div id="becaptcha" class="menu-section">'),i.b("\n"+n),i.b('      <div id="recaptcha_image"></div>'),i.b("\n"+n),i.b('      <div class="form-item form-item-text">'),i.b("\n"+n),i.b('        <input id="recaptcha_response_field" name="recaptcha_response_field" class="form-text form-text-normal" type="text" placeholder="Enter the code shown above">'),i.b("\n"+n),i.b("      </div>"),i.b("\n"+n),i.b('      <div class="recaptcha-generate">Generate new</div>'),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n)}),e.pop()),i.b("  </form>"),i.b("\n"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<textarea0":{name:"textarea",partials:{},subs:{}},"<text1":{name:"text",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("require/hgn!templates/form/text",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="form-item form-item-text be-placeholder'),i.s(i.f("containerClasses",e,t,1),e,t,0,72,78,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b('" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('-container">'),i.b("\n"+n),i.b("  "),i.s(i.f("label",e,t,1),e,t,0,136,175,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b('<label for="'),n.b(n.v(n.f("id",e,t,0))),n.b('">'),n.b(n.t(n.f("label",e,t,0))),n.b("</label>")}),e.pop()),i.b("\n"+n),i.b('  <input name="'),i.b(i.v(i.f("id",e,t,0))),i.b('" type="text" class="form-text'),i.s(i.f("classes",e,t,1),e,t,0,249,255,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(" "),n.b(n.v(n.d(".",e,t,0)))}),e.pop()),i.b(" validate["),i.b(i.v(i.f("validate",e,t,0))),i.b(']" id="'),i.b(i.v(i.f("id",e,t,0))),i.b('"'),i.b("\n"+n),i.b("  "),i.s(i.f("placeholder",e,t,1),e,t,0,322,354,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' placeholder="'),n.b(n.t(n.f("placeholder",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("  "),i.s(i.f("autocomplete",e,t,1),e,t,0,390,422,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' autocomplete="'),n.b(n.v(n.f("autocomplete",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b("  "),i.s(i.f("value",e,t,1),e,t,0,452,470,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(' value="'),n.b(n.v(n.f("value",e,t,0))),n.b('"')}),e.pop()),i.b("\n"+n),i.b('  data-validate="'),i.b(i.v(i.f("validate",e,t,0))),i.b('">'),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/report",["jquery","nbd/util/extend","lib/recaptcha","hgn!templates/project/report","hgn!templates/form/text","hgn!templates/form/textarea"],function(e,t,n,i,o,r){"use strict";return{mustache:i,partials:{text:o.template,textarea:r.template},templateData:function(){return t({title:"Report",classes:["report"],buttons:[{label:"Send",classes:["left","form-button-default","form-submit"]},{label:"Cancel",classes:["left","form-button-cancel"]}],comments:{id:"message",placeholder:"Comments",classes:["form-text-normal"]}},this._model.data(),e(document.body).hasClass("logged-out")?{email:{id:"email",placeholder:"Email Address",classes:["form-text-normal"]}}:{})},captcha:function(){var e=this._model.get("captcha"),t=this.$view.find("#becaptcha");e&&n(e.api_key,t[0],{theme:"custom",custom_theme_widget:"becaptcha"},e.script_url).then(function(e){t.on("click",".recaptcha-generate",function(){e.reload()})})},rendered:function(){this.selectList(),this.captcha(),this.onSubmit(function(e){this._controller.create(e).then(this.hide.bind(this))}.bind(this)),this.onCancel(),this._super()},hide:function(){this._super.apply(this,arguments),this.$view=null}}}),define("project/Controller/Report",["lib/xhr","be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Dialog/Menu","be/View/Dialog/Popup","be/trait/form","project/trait/report"],function(e,t,n,i,o,r,s){"use strict";var a=t.extend({init:function(){this._super.apply(this,arguments),this.path=this._model.get("CONSTANTS").REPORT_URL+this._model.id()},create:function(t){return e({url:this.path,type:"POST",data:t})},read:function(){var t=e({url:this.path});return t.then(this._model.set.bind(this._model)),t},render:function(){var e=this,t=this._super,n=arguments;this.read().then(function(){t.apply(e,n)}).then(this._view.show.bind(this._view))}},{VIEW_CLASS:{phone:n.extend(s).mixin(r),tablet:i.extend(s).mixin(r),desktop:o.extend(s).mixin(r)}});return a}),define("require/hgn!templates/project/viralIcons",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<a href="https://twitter.com/share" class="twitter-share-button viral-button-twitter" data-url="'),i.b(i.v(i.f("url",e,t,0))),i.b('" data-text="'),i.b(i.v(i.f("title",e,t,0))),i.b('" data-via="Behance" data-count="none">Tweet</a>'),i.b("\n"+n),i.b('<span class="viral-button-linkedin"><script type="IN/Share" data-url="'),i.b(i.v(i.f("url",e,t,0))),i.b('"></script></span>'),i.b("\n"+n),i.s(i.f("no_pinterest",e,t,1),e,t,1,0,0,"")||(i.b('<div class="viral-button viral-button-pinterest"></div>'),i.b("\n"+n)),i.b('<span class="viral-button-stumble"><su:badge layout="4" location="'),i.b(i.v(i.f("url",e,t,0))),i.b('"></su:badge></span>'),i.b("\n"+n),i.b('<div class="fb-like" data-send="false" data-layout="button_count" data-width="90" data-show-faces="false"></div>'),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/lib/stickyBar",["jquery","lib/scrollpoint","lib/social","be/follow","be/Controller/Dialog/Message","project/Controller/Collection","hgn!templates/project/viralIcons","jquery/plugins/jquery.sticky"],function(e,t,n,i,o,r,s){"use strict";return{init:function(a,l,c){var u=l.is(e(document.body))?a.height()+a.offset().top:a.height(),d=e('<div id="sticky-sidebar"></div>)').append(e(".sidebar-owner",a).clone()).append(e(".sidebar-actions",a).clone());i.init(d),this.message=new o,this.message.setContext(d.find(".send-message")),this.collection=new r(c.id),this.collection.setContext(d.find(".add-to-collection")),d.find(".viral-icons").html(s({url:document.location.href,title:document.title,no_pinterest:"no-use"===c.copyright.license})),t(u,function(t){t&&a.find("#sticky-sidebar").length<1&&(a.append(d),n.init(d),d.sticky({topSpacing:e("#navmenui-shuffle").outerHeight()+e(".showcase-bar").outerHeight(),bottomSpacing:e("#site-footer").height()+parseInt(e("#content-container").css("margin-bottom"),10)},e(l.is(e(document.body))?window:"#project-popup")))},l.is(e(document.body))?"window":"#project-popup")},destroy:function(e){t.off(null,null,e)}}}),define("lib/picturefill",["jquery"],function(e){"use strict";var t=window.matchMedia||window.msMatchMedia,n=function(){var n=e(this),i=n.find("div[data-src]");return i.length?(t&&(i=i.first().add(i.filter(function(){var n=e(this).data("media");return n&&t(n).matches})).last()),n.attr("data-rendered","rendered"),void e("<img>",{alt:n.data("alt"),src:i.data("src"),"class":i.data("class"),title:i.data("title"),"data-pin-nopin":"pin"}).appendTo(n)):void n.find("img").remove()};return e.fn.picturefill=function(){return this.find("div[data-picture]:not([data-rendered])").each(n),this}}),define("project/lib/info",["jquery","nbd/util/async","nbd/util/media","nbd/event","be/follow","be/spam","be/Controller/Dialog/Message","project/Controller/Collection","project/Controller/Report","project/lib/stickyBar","lib/picturefill"],function(e,t,n,i,o,r,s,a,l,c){"use strict";return{init:function(u,d,f){var p=u.find(".variable-text-full"),h=u.find(".variable-text-short");h.on("click",".variable-text-link",function(){h.addClass("hide"),p.removeClass("hide")}),p.on("click",".variable-text-link",function(){p.addClass("hide"),h.removeClass("hide")}),u.is(e(document.body))?n.on("desktop:enter",function(){c.init(u.find("#project-sidebar"),u,d)}):t(function(){c.init(u.find("#project-sidebar"),u,d)}),t(function(){u.find("#project-header-main").picturefill()}),o.init(u),this.message=new s,this.message.setContext(u.find(".send-message")),this.collection=new a(d.id),this.collection.setContext(u.find(".add-to-collection"));var b=function(e,t){return function(){g[e]("viewing-all"),m.height(t)}},m=u.find("#object-tags"),g=u.find("#object-tags-see-all");m.length&&(m.prop("scrollHeight")>m.height()?(g.find(".viewing-less-copy").on("click",b("addClass",m[0].scrollHeight)),g.find(".viewing-more-copy").on("click",b("removeClass",m.height())),g.show()):m.height("auto")),this.report=new l(d.id,{CONSTANTS:f}),this.report.setContext(u.find(".js-report")),i.on("report:open",this.report.toggle,this.report),t(function(){var e=n.is("desktop");d.open_message&&e&&this.message.toggle(),d.open_collection&&e&&this.collection.toggle()}.bind(this)),u.on("click",".js-spam-project",function(t){r.report("project",d.id,e(this)),t.preventDefault()})},destroy:function(){c.destroy("#project-popup"),this.message&&this.message.destroy(),this.collection&&this.collection.destroy(),this.report&&(this.report.destroy(),i.off(null,null,this.report))}}}),define("be/stats",["jquery","nbd/util/pipe"],function(e,t){"use strict";function n(t,n){var i=e.isFunction(n.back)?n.back:"string"==typeof n.back&&n.back.split(".").reduce(function(e,t){return e&&e[t]},window);i=e.isFunction(i)?i:e.noop,n.back="define",n._=Date.now();var o=n.a;delete n.a,require([t+"/"+o+"?"+e.param(n)],i)}function i(e){return document.referrer&&(e.referrer=document.referrer),window.Config&&void 0!==Config.SITE_ID&&(e.source=Config.SITE_ID),e}function o(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&u.hasOwnProperty(t)&&(n[u[t]]=e[t]);return n}var r,s,a,l,c=window.Config&&Config.STAT_URL||"/c",u={action:"a",callback:"back",entity:"e",ids:"ids",id:"id",type:"t",time:"ti",contest:"c",source:"s",referrer:"r"};return r=n.bind(null,c),s=t(i,o,r),a=function(e,t,n,i){return s({action:e,entity:t,id:n,callback:i}),this},l={get:s,view:a.bind(l,"v"),appreciate:a.bind(l,"a")}}),define("require/hgn!templates/appreciate",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div id="appreciated-on-content">'),i.b("\n"+n),i.b('  <div class="app-content app-img-container left"></div>'),i.b("\n"+n),i.b('  <div class="app-content app-date">Appreciated on '),i.b(i.v(i.f("date",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/View/Appreciation",["jquery","moment","nbd/View","be/stats","hgn!templates/appreciate"],function(e,t,n,i,o){"use strict";var r=n.extend({id:0,init:function(e){this.id=e
},render:function(e){e&&(this.$view=e,this.$sticker=this.$view.find("#appreciation-sticker"),this.$tooltip=this.$view.find(".tooltipi"),this.$view.find(".following").hide(),i.view("project",this.id,function(e){e.t>0?this.hide(e.t):this.show()}.bind(this)))},show:function(){var t=this.$view.offset();this.$view.find("#appreciate-it").show().on("click",function(){t&&e("html").animate({scrollTop:t.top-200},600),this.$sticker.click()}.bind(this)),this.$sticker.addClass("icon-project-appreciate sprite-site-elements ccn-appreciation-sprite").one("click",this.appreciate.bind(this))},hide:function(e){this.$sticker.after(o({date:t.unix(e).format("MMMM Do, YYYY")})),this.$tooltip.addClass("tooltipi-project-appreciate-show tooltipi-project-appreciated").show()},appreciate:function(){i.appreciate("project",this.id),this.$sticker.removeClass("icon-project-appreciate").addClass("icon-project-appreciate-thanks"),this.$tooltip.addClass("tooltipi-project-appreciate-show"),(0!==this.$view.find(".following").length||0===this.$view.find(".action-follow-user").length)&&this.$tooltip.addClass("tooltipi-no-follow-button"),this.$view.find("#appreciate-it").hide(),e("#appreNum").text(+e("#appreNum").text()+1)}});return r}),define("require/css!styles/jquery/plugins/jquery.fancybox",[],function(){}),define("require/css!styles/jquery/plugins/jquery.fancybox-network",[],function(){}),function(e,t,n){var i=n(e),o=n(t),r=n.fancybox=function(){r.open.apply(this,arguments)},s=!1,a=navigator.userAgent.match(/msie/i),l=null;n.extend(r,{version:"2.0.4",defaults:{padding:15,margin:20,width:800,height:600,minWidth:200,minHeight:200,maxWidth:9999,maxHeight:9999,autoSize:!0,fitToView:!0,aspectRatio:!1,topRatio:.5,fixed:!1 in t.documentElement||t,scrolling:"auto",wrapCSS:"fancybox-default",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,modal:!1,loop:!0,ajax:{},keys:{next:[13,32,34,39,40],prev:[8,33,37,38],close:[27]},index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe class="fancybox-iframe" name="fancybox-frame{rnd}" frameborder="0" hspace="0" '+(a?'allowtransparency="true""':"")+' scrolling="{scrolling}" src="{href}"></iframe>',swf:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="wmode" value="transparent" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{href}" /><embed src="{href}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="100%" height="100%" wmode="transparent"></embed></object>',error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<div title="Close" class="fancybox-item fancybox-close"></div>',next:'<a title="Next" class="fancybox-item fancybox-next"><span></span></a>',prev:'<a title="Previous" class="fancybox-item fancybox-prev"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:300,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:300,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:{speedIn:0,speedOut:300,opacity:.8,css:{cursor:"pointer"},closeClick:!0},title:{type:"float"}},onCancel:n.noop,beforeLoad:n.noop,afterLoad:n.noop,beforeShow:n.noop,afterShow:n.noop,beforeClose:n.noop,afterClose:n.noop},group:{},opts:{},coming:null,current:null,isOpen:!1,isOpened:!1,wrap:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){n.isArray(e)||(e=[e]),e.length&&(r.close(!0),r.opts=n.extend(!0,{},r.defaults,t),r.group=e,r._start(r.opts.index||0))},cancel:function(){r.coming&&!1===r.trigger("onCancel")||(r.coming=null,r.hideLoading(),r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onabort=r.imgPreload.onerror=null))},close:function(e){r.cancel(),r.current&&!1!==r.trigger("beforeClose")&&(r.unbindEvents(),!r.isOpen||e&&e[0]===!0?(n(".fancybox-wrap").stop().trigger("onReset").remove(),r._afterZoomOut()):(r.isOpen=r.isOpened=!1,n(".fancybox-item").remove(),r.wrap.stop(!0).removeClass("fancybox-opened"),r.inner.css("overflow","hidden"),r.transitions[r.current.closeMethod]()))},play:function(e){var t=function(){clearTimeout(r.player.timer)},i=function(){t(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},o=function(){t(),n("body").unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")},s=function(){r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,n("body").bind({"afterShow.player onUpdate.player":i,"onCancel.player beforeClose.player":o,"beforeLoad.player":t}),i(),r.trigger("onPlayStart"))};r.player.isActive||e&&e[0]===!1?o():s()},next:function(){r.current&&r.jumpto(r.current.index+1)},prev:function(){r.current&&r.jumpto(r.current.index-1)},jumpto:function(e){r.current&&(e=parseInt(e,10),r.group.length>1&&r.current.loop&&(e>=r.group.length?e=0:0>e&&(e=r.group.length-1)),"undefined"!=typeof r.group[e]&&(r.cancel(),r._start(e)))},reposition:function(e){r.isOpen&&r.wrap.css(r._getPosition(e))},update:function(){r.isOpen&&(s||(l=setInterval(function(){s&&(s=!1,clearTimeout(l),r.current&&(r.current.autoSize&&(r.inner.height("auto"),r.current.height=r.inner.height()),r._setDimension(),r.current.canGrow&&r.inner.height("auto"),r.reposition(),r.trigger("onUpdate")))},100)),s=!0)},toggle:function(){r.isOpen&&(r.current.fitToView=!r.current.fitToView,r.update())},hideLoading:function(){n("#fancybox-loading").remove()},showLoading:function(){r.hideLoading(),n('<div id="fancybox-loading"></div>').click(r.cancel).appendTo("body")},getViewport:function(){return{x:i.scrollLeft(),y:i.scrollTop(),w:i.width(),h:i.height()}},unbindEvents:function(){r.wrap&&r.wrap.unbind(".fb"),o.unbind(".fb"),i.unbind(".fb")},bindEvents:function(){var e=r.current,t=e.keys;e&&(i.bind("resize.fb, orientationchange.fb",r.update),t&&o.bind("keydown.fb",function(e){var i;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||!(n.inArray(e.target.tagName.toLowerCase(),["input","textarea","select","button"])<0)||(i=e.keyCode,n.inArray(i,t.close)>-1?(r.close(),e.preventDefault()):n.inArray(i,t.next)>-1?(r.next(),e.preventDefault()):n.inArray(i,t.prev)>-1&&(r.prev(),e.preventDefault()))}),n.fn.mousewheel&&e.mouseWheel&&r.group.length>1&&r.wrap.bind("mousewheel.fb",function(e,t){var i=n(e.target).get(0);(0===i.clientHeight||i.scrollHeight===i.clientHeight)&&(e.preventDefault(),r[t>0?"prev":"next"]())}))},trigger:function(e){var t,i=r[n.inArray(e,["onCancel","beforeLoad","afterLoad"])>-1?"coming":"current"];if(i){if(n.isFunction(i[e])&&(t=i[e].apply(i,Array.prototype.slice.call(arguments,1))),t===!1)return!1;i.helpers&&n.each(i.helpers,function(t,o){o&&"undefined"!=typeof r.helpers[t]&&n.isFunction(r.helpers[t][e])&&r.helpers[t][e](o,i)}),n.event.trigger(e+".fb")}},isImage:function(e){return e&&e.match(/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i)},isSWF:function(e){return e&&e.match(/\.(swf)(.*)?$/i)},_start:function(e){var t,i,o,s,a={},l=r.group[e]||null;return"object"==typeof l&&(l.nodeType||l instanceof n)&&(t=!0,n.metadata&&(a=n(l).metadata())),a=n.extend(!0,{},r.opts,{index:e,element:l},n.isPlainObject(l)?l:a),n.each(["href","title","content","type"],function(e,i){a[i]=r.opts[i]||t&&n(l).attr(i)||a[i]||null}),"number"==typeof a.margin&&(a.margin=[a.margin,a.margin,a.margin,a.margin]),a.modal&&n.extend(!0,a,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{css:{cursor:"auto"},closeClick:!1}}}),r.coming=a,!1===r.trigger("beforeLoad")?void(r.coming=null):(o=a.type,i=a.href,o||(t&&(s=n(l).data("fancybox-type"),!s&&l.className&&(s=l.className.match(/fancybox\.(\w+)/),o=s?s[1]:null)),!o&&i&&(r.isImage(i)?o="image":r.isSWF(i)?o="swf":i.match(/^#/)&&(o="inline")),o||(o=t?"inline":"html"),a.type=o),"inline"===o||"html"===o?(a.content=a.content||("inline"===o&&i?n(i):l),a.content.length||(o=null)):(a.href=i||l,a.href||(o=null)),a.group=r.group,void("image"===o?r._loadImage():"ajax"===o?r._loadAjax():o?r._afterLoad():r._error("type")))},_error:function(e){n.extend(r.coming,{type:"html",autoSize:!0,minHeight:"0",hasError:e,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){r.imgPreload=new Image,r.imgPreload.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width,r.coming.height=this.height,r._afterLoad()},r.imgPreload.onerror=function(){this.onload=this.onerror=null,r._error("image")},r.imgPreload.src=r.coming.href,r.imgPreload.complete||r.showLoading()},_loadAjax:function(){r.showLoading(),r.ajaxLoad=n.ajax(n.extend({},r.coming.ajax,{url:r.coming.href,error:function(e,t){"abort"!==t?r._error("ajax",e):r.hideLoading()},success:function(e,t){"success"===t&&(r.coming.content=e,r._afterLoad())}}))},_preload:function(){var e=r.group,t=r.current.index,i=function(e){e&&r.isImage(e)&&((new Image).src=e)};e.length>1&&(i(n(e[t+1]||e[0]).attr("href")),i(n(e[t-1]||e[e.length-1]).attr("href")))},_afterLoad:function(){return r.hideLoading(),r.coming&&!1!==r.trigger("afterLoad",r.current)?(r.isOpened?(n(".fancybox-item").remove(),r.wrap.stop(!0).removeClass("fancybox-opened"),r.inner.css("overflow","hidden"),r.transitions[r.current.prevMethod]()):(n(".fancybox-wrap").stop().trigger("onReset").remove(),r.trigger("afterClose")),r.unbindEvents(),r.isOpen=!1,r.current=r.coming,r.coming=!1,r.wrap=n(r.current.tpl.wrap).addClass("fancybox-tmp "+r.current.wrapCSS).appendTo("body"),r.outer=n(".fancybox-outer",r.wrap).css("padding",r.current.padding+"px"),r.inner=n(".fancybox-inner",r.wrap),r._setContent(),r.trigger("beforeShow"),r._setDimension(),r.wrap.hide().removeClass("fancybox-tmp"),r.bindEvents(),r._preload(),void r.transitions[r.isOpened?r.current.nextMethod:r.current.openMethod]()):void(r.coming=!1)},_setContent:function(){var e,t,i=r.current,o=i.type;switch(o){case"inline":case"ajax":case"html":e=i.content,"inline"===o&&e instanceof n&&(e=e.show().detach(),e.parent().hasClass("fancybox-inner")&&e.parents(".fancybox-wrap").trigger("onReset").remove(),n(r.wrap).bind("onReset",function(){e.appendTo("body").hide()})),i.autoSize&&(t=n('<div class="fancybox-tmp"></div>').appendTo(n("body")).append(e),i.width=t.outerWidth(),i.height=t.outerHeight(!0),e=t.contents().detach(),t.remove());break;case"image":e=i.tpl.image.replace("{href}",i.href),i.aspectRatio=!0;break;case"swf":e=i.tpl.swf.replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{href\}/g,i.href);break;case"iframe":e=i.tpl.iframe.replace("{href}",i.href).replace("{scrolling}",i.scrolling).replace("{rnd}",(new Date).getTime())}n.inArray(o,["image","swf","iframe"])>-1&&(i.autoSize=!1,i.scrolling=!1),r.inner.append(e)},_setDimension:function(){var e,t,i=r.wrap,o=r.outer,s=r.inner,a=r.current,l=r.getViewport(),c=a.margin,u=2*a.padding,d=a.width+u,f=a.height+u,p=a.width/a.height,h=a.maxWidth,b=a.maxHeight,m=a.minWidth,g=a.minHeight;if(l.w-=c[1]+c[3],l.h-=c[0]+c[2],d.toString().indexOf("%")>-1&&(d=l.w*parseFloat(d)/100),f.toString().indexOf("%")>-1&&(f=l.h*parseFloat(f)/100),a.fitToView&&(h=Math.min(l.w,h),b=Math.min(l.h,b)),m=Math.min(d,m),g=Math.min(d,g),h=Math.max(m,h),b=Math.max(g,b),a.aspectRatio?(d>h&&(d=h,f=(d-u)/p+u),f>b&&(f=b,d=(f-u)*p+u),m>d&&(d=m,f=(d-u)/p+u),g>f&&(f=g,d=(f-u)*p+u)):(d=Math.max(m,Math.min(d,h)),f=Math.max(g,Math.min(f,b))),d=Math.round(d),f=Math.round(f),n(i.add(o).add(s)).width("auto").height("auto"),s.width(d-u).height(f-u),i.width(d),e=i.height(),d>h||e>b)for(;(d>h||e>b)&&d>m&&e>g;)f-=10,a.aspectRatio?(d=Math.round((f-u)*p+u),m>d&&(d=m,f=(d-u)/p+u)):d-=10,s.width(d-u).height(f-u),i.width(d),e=i.height();a.dim={width:d,height:e},a.canGrow=a.autoSize&&f>g&&b>f,a.canShrink=!1,a.canExpand=!1,d-u<a.width||f-u<a.height?a.canExpand=!0:(d>l.w||e>l.h)&&d>m&&f>g&&(a.canShrink=!0),t=e-u,r.innerSpace=t-s.height(),r.outerSpace=t-o.height()},_getPosition:function(e){var t=r.current,n=r.getViewport(),i=t.margin,o=r.wrap.width()+i[1]+i[3],s=r.wrap.height()+i[0]+i[2],a={position:"absolute",top:i[0]+n.y,left:i[3]+n.x};return t.fixed&&(!e||e[0]===!1)&&s<=n.h&&o<=n.w&&(a={position:"fixed",top:i[0],left:i[3]}),a.top=Math.ceil(Math.max(a.top,a.top+(n.h-s)*t.topRatio))+"px",a.left=Math.ceil(Math.max(a.left,a.left+.5*(n.w-o)))+"px",a},_afterZoomIn:function(){var e=r.current;r.isOpen=r.isOpened=!0,r.wrap.addClass("fancybox-opened").css("overflow","visible"),r.update(),r.inner.css("overflow","auto"===e.scrolling?"auto":"yes"===e.scrolling?"scroll":"hidden"),(e.closeClick||e.nextClick)&&r.inner.css("cursor","pointer").bind("click.fb",e.nextClick?r.next:r.close),e.closeBtn&&n(e.tpl.closeBtn).appendTo(r.wrap).bind("click.fb",r.close),e.arrows&&r.group.length>1&&((e.loop||e.index>0)&&n(e.tpl.prev).appendTo(r.wrap).bind("click.fb",r.prev),(e.loop||e.index<r.group.length-1)&&n(e.tpl.next).appendTo(r.wrap).bind("click.fb",r.next)),r.trigger("afterShow"),r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play())},_afterZoomOut:function(){r.trigger("afterClose"),r.wrap.trigger("onReset").remove(),n.extend(r,{group:{},opts:{},current:null,isOpened:!1,isOpen:!1,wrap:null,outer:null,inner:null})}}),r.transitions={getOrigPosition:function(){var e,t,i=r.current.element,o={},s=50,a=50;return i&&i.nodeName&&n(i).is(":visible")?(e=n(i).find("img:first"),e.length?(o=e.offset(),s=e.outerWidth(),a=e.outerHeight()):o=n(i).offset()):(t=r.getViewport(),o.top=t.y+.5*(t.h-a),o.left=t.x+.5*(t.w-s)),o={top:Math.ceil(o.top)+"px",left:Math.ceil(o.left)+"px",width:Math.ceil(s)+"px",height:Math.ceil(a)+"px"}},step:function(e,t){var n,i,o;("width"===t.prop||"height"===t.prop)&&(i=o=Math.ceil(e-2*r.current.padding),"height"===t.prop&&(n=(e-t.start)/(t.end-t.start),t.start>t.end&&(n=1-n),i-=r.innerSpace*n,o-=r.outerSpace*n),r.inner[t.prop](i),r.outer[t.prop](o))},zoomIn:function(){var e,t,i=r.wrap,o=r.current,s=o.dim;"elastic"===o.openEffect?(t=n.extend({},s,r._getPosition(!0)),delete t.position,e=this.getOrigPosition(),o.openOpacity&&(e.opacity=0,t.opacity=1),i.css(e).show().animate(t,{duration:o.openSpeed,easing:o.openEasing,step:this.step,complete:r._afterZoomIn})):(i.css(n.extend({},s,r._getPosition())),"fade"===o.openEffect?i.fadeIn(o.openSpeed,r._afterZoomIn):(i.show(),r._afterZoomIn()))},zoomOut:function(){var e,t=r.wrap,n=r.current;"elastic"===n.closeEffect?("fixed"===t.css("position")&&t.css(r._getPosition(!0)),e=this.getOrigPosition(),n.closeOpacity&&(e.opacity=0),t.animate(e,{duration:n.closeSpeed,easing:n.closeEasing,step:this.step,complete:r._afterZoomOut})):t.fadeOut("fade"===n.closeEffect?n.closeSpeed:0,r._afterZoomOut)},changeIn:function(){var e,t=r.wrap,n=r.current;"elastic"===n.nextEffect?(e=r._getPosition(!0),e.opacity=0,e.top=parseInt(e.top,10)-200+"px",t.css(e).show().animate({opacity:1,top:"+=200px"},{duration:n.nextSpeed,complete:r._afterZoomIn})):(t.css(r._getPosition()),"fade"===n.nextEffect?t.hide().fadeIn(n.nextSpeed,r._afterZoomIn):(t.show(),r._afterZoomIn()))},changeOut:function(){var e=r.wrap,t=r.current,i=function(){n(this).trigger("onReset").remove()};e.removeClass("fancybox-opened"),"elastic"===t.prevEffect?e.animate({opacity:0,top:"+=200px"},{duration:t.prevSpeed,complete:i}):e.fadeOut("fade"===t.prevEffect?t.prevSpeed:0,i)}},r.helpers.overlay={overlay:null,update:function(){var e,n,r;this.overlay.width(0).height(0),a?(n=Math.max(t.documentElement.scrollWidth,t.body.scrollWidth),r=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),e=r>n?i.width():n):e=o.width(),this.overlay.width(e).height(o.height())},beforeShow:function(e){this.overlay||(this.overlay=n('<div id="fancybox-overlay"></div>').css(e.css||{background:"black"}).appendTo("body"),this.update(),e.closeClick&&this.overlay.bind("click.fb",r.close),i.bind("resize.fb",n.proxy(this.update,this)),this.overlay.fadeTo(e.speedIn||"fast",e.opacity||1))},onUpdate:function(){this.update()},afterClose:function(e){this.overlay&&this.overlay.fadeOut(e.speedOut||"fast",function(){n(this).remove()}),this.overlay=null}},r.helpers.title={beforeShow:function(e){var t,i=r.current.title;i&&(t=n('<div class="fancybox-title fancybox-title-'+e.type+'-wrap">'+i+"</div>").appendTo("body"),"float"===e.type&&(t.width(t.width()),t.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(parseInt(t.css("margin-bottom"),10))),t.appendTo("over"===e.type?r.inner:"outside"===e.type?r.wrap:r.outer))}},n.fn.fancybox=function(e){function t(e){var t,o,a=[],l=this.rel;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault(),o=n(this).data("fancybox-group"),"undefined"!=typeof o?t=o?"data-fancybox-group":!1:l&&""!==l&&"nofollow"!==l&&(o=l,t="rel"),t&&(a=s.length?n(s).filter("["+t+'="'+o+'"]'):n("["+t+'="'+o+'"]')),a.length?(i.index=a.index(this),r.open(a.get(),i)):r.open(this,i))}var i=e||{},s=this.selector||"";return s?o.undelegate(s,"click.fb-start").delegate(s,"click.fb-start",t):n(this).unbind("click.fb-start").bind("click.fb-start",t),this}}(window,document,jQuery),define("jquery/plugins/jquery.fancybox",function(){}),define("project/lib/highdef",["jquery","jquery/plugins/jquery.fancybox"],function(e){"use strict";var t={padding:0,loop:!0,nextEffect:"fade",prevEffect:"fade",title:'<div class="hide cfix" id="fancybox-logo" style="display: block;"><div class="powered-by">HD Powered by <strong>B&emacr;hance</strong> <em>Prosite</em></div></div>',helpers:{title:{type:"outside"}}},n=function(){var t,n=e(this),i=n.data("hd-src"),o=n.attr("original")||n.attr("src");return i?i:~(t=o.lastIndexOf("/"))?o.substring(0,t+1)+"hd_"+o.substring(t+1):o},i=function(){e(this).attr("data-fancybox-group","gallery").attr("href",n.call(this)).fancybox(t)};return e.fn.highdef=function(){return this.each(i),["-moz-zoom-in","-webkit-zoom-in","zoom-in",'url("/assets/img/site/-ie-zoom-in.cur"), pointer, hand'].forEach(function(e){this.css("cursor",e)},this),this}}),define("project/trait/mature",["nbd/util/extend","hgn!templates/html","vendor/history"],function(e,t){"use strict";var n={"restricted-safe":[{label:"Turn off Safe Browsing",classes:["form-button-default","form-submit"]},{label:"Cancel",classes:["form-button-cancel"]}]};return{mustache:t,templateData:function(){var t=e({classes:["mature-blocker","safe"]},this._model.data());return t.buttons=n[t.access],t},rendered:function(){this.$view.on("click",".form-submit",function(){this._controller.disableSafeBrowsing().then(this.hide.bind(this)).then(this.destroy.bind(this))}.bind(this)).filter(".blocking-div").on("click",function(e){e.stopImmediatePropagation()}),this._super()}}}),define("project/Controller/MatureContent",["lib/xhr","be/Controller/Dialog","be/View/Dialog/Layover","be/View/Dialog/Popup","project/trait/mature"],function(e,t,n,i,o){"use strict";var r=i.extend(o),s=n.extend(o),a=t.extend({render:function(){this._view&&(this._view.render(document.body),this._view.position())},disableSafeBrowsing:function(){return e({type:"POST",url:"/account/settings?step=safe_browsing",data:{safe_browsing_setting:"N"}}).then(function(){window.location.reload()},console.error)}},{VIEW_CLASS:{phone:s,tablet:r,desktop:r}});return a}),define("require/hgn!templates/project/matureLogin",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="mature-message">'),i.b("\n"+n),i.b('  You must log in or sign up for Behance<br class="hide-phone">'),i.b("\n"+n),i.b("  to view projects containing adult content."),i.b("\n"+n),i.s(i.f("login",e,t,1),e,t,0,150,162,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b(n.rp("<button0",e,t,""))}),e.pop()),i.b("</div>"),i.b("\n"),i.b("\n"+n),i.b('<div class="popup-buttons">'),i.b("\n"+n),i.b('  Don\'t Have an Account? <a class="signup" href="/signup">Sign up for Behance</a>'),i.b("\n"+n),i.b("</div>"),i.b("\n"),i.fl()},partials:{"<button0":{name:"button",partials:{},subs:{}}},subs:{}},"",e);return t.template=n,t}),define("project/Controller/MatureLogin",["be/Controller/Dialog","be/View/Dialog/Layover","be/View/Dialog/Popup","vendor/history","hgn!templates/project/matureLogin"],function(e,t,n,i,o){"use strict";var r={mustache:o,hide:function(){i.back()}},s=n.extend(r),a=t.extend(r),l=e.extend({render:function(){this._view&&(this._view.render(document.body),this._view.position())}},{VIEW_CLASS:{phone:a,tablet:s,desktop:s}});return l}),define("project/lib/mature",["project/Controller/MatureContent","project/Controller/MatureLogin"],function(e,t){"use strict";var n={init:function(n,i,o){if(i.mature_content){var r,s;if("logged-out"===i.mature_access)r=new t({classes:["mature-blocker","log-in"],title:"Log In",login:{classes:["form-button-default","form-button-large"],label:"Log In",href:"/account/login"}});else{if(s=o.MATURE_ACCESS[i.mature_access],!s)return;r=new e(n,{title:"This project contains adult content",html:s,access:i.mature_access})}r.render(),this.popup=r}},destroy:function(){this.popup&&this.popup.destroy()}};return n}),define("project/lib/embed",["jquery","nbd/util/async"],function(e,t){"use strict";var n=function(){var n=e(this).removeAttr("allowscriptaccess"),i=n.closest(".module");"transparent"!==n.attr("wmode")&&(i.height(i.height()),n.attr("wmode","transparent").hide(),t(function(){n.show()}))},i=function(){return this.each(n)};return i.init=function(t){e("#primary-project-content .module embed",t).embedFix()},e.fn.embedFix=i}),define("project/lib/content",["jquery","nbd/util/async","lib/scrollpoint","project/View/Appreciation","project/lib/highdef","project/lib/mature","project/lib/embed"],function(e,t,n,i,o,r){"use strict";return{init:function(e,n,o){r.init(n.id,n,o),this.appreciate=new i(n.id),this.appreciate.render(e.find("#appreciation")),t(function(){this.lazyload(e)}.bind(this)),e.find(".module embed").embedFix(),e.is(".hd_images_enabled")&&e.find(".hd_avail").highdef()},lazyload:function(t){var i=t.find(".module.image img:not(.lazy-load):last").offset()||t.find(".module.image img.lazy-load:first").offset(),o=t.closest(".popup");i&&n(i.top-t.offset().top-window.innerHeight,function(){t.find(".module.image img.lazy-load").each(function(){var t=e(this);t.attr("src",t.attr("original")).css("opacity",0).one("load",function(){t.animate({opacity:1},150),t.removeClass("lazy-load")})})},o.length?"#project-popup":"window")},destroy:function(){this.appreciate&&this.appreciate.destroy(),r.destroy()}}}),define("lib/loadmore",["jquery","nbd/Class","nbd/util/construct","nbd/util/extend"],function(e,t,n,i){"use strict";var o=t.extend({loading:!1,moreSelector:".see-more-button-container",init:function(t,n,i){this.data=n||{},this.callback=i,this.loading=!1,this.$content=t,this.$more=e(this.moreSelector,this.data.$pagination),this.get=this.more.bind(this,void 0),this.$more.on("click",this.get),this.before()},set:function(e){return i(this.data,e),this},destroy:function(){this.$more.off("click",this.get)},load:function(t){return e.ajax({data:e.extend({},this.data,t)})},more:function(e){return this.loading=!0,this.load(e).then(this.render.bind(this)).done(this.after.bind(this)).done(this.callback)},render:function(t){return this.loading=!1,t.html?e(t.html).appendTo(this.$content):t},before:function(){},after:function(){}},{init:function(){return n.apply(this,arguments)}});return o}),define("require/hgn!templates/comment",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<li class="comment-container cfix '),i.s(i.d("user.owner",e,t,1),e,t,0,49,62,"{{ }}")&&(i.rs(e,t,function(e,t,n){n.b("owner-comment")}),e.pop()),i.s(i.d("user.owner",e,t,1),e,t,1,0,0,"")||i.b("user-comment"),i.b('" data-id="'),i.b(i.v(i.f("id",e,t,0))),i.b('">'),i.b("\n"+n),i.b('  <a class="comment-user-image-link left" href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b("\n"+n),i.b('    <img class="comment-user-image js-mini-profile" data-id="'),i.b(i.v(i.d("user.id",e,t,0))),i.b('" src="'),i.b(i.v(i.d("user.image",e,t,0))),i.b('">'),i.b("\n"+n),i.b("  </a>"),i.b("\n"+n),i.b('  <div class="comment-text-container left relative">'),i.b("\n"+n),i.b('    <div class="comment-user-date-wrap ui-corner cfix">'),i.b("\n"+n),i.b('      <a class="user-name-link bold js-mini-profile" data-id="'),i.b(i.v(i.d("user.id",e,t,0))),i.b('" href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b(i.v(i.d("user.name",e,t,0))),i.b("</a>"),i.b("\n"+n),i.s(i.f("replied_to",e,t,1),e,t,0,548,639,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <span class="bold">replied to <a href="'),i.b(i.v(i.d("user.url",e,t,0))),i.b('">'),i.b(i.v(i.d("user.name",e,t,0))),i.b("</a></span>"),i.b("\n"+n)}),e.pop()),i.b('      <span class="comment-date hide-phone">'),i.b(i.v(i.f("posted_on",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="comment-text-wrap"><div class="comment-text">'),i.b(i.t(i.f("comment",e,t,0))),i.b("</div></div>"),i.b("\n"+n),i.b('    <span class="comment-date show-phone">'),i.b(i.v(i.f("posted_on",e,t,0))),i.b("</span>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"+n),i.b('  <div class="comment-actions">'),i.b("\n"+n),i.s(i.d("permissions.flag",e,t,1),e,t,0,947,1008,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <a class="comment-action comment-spam js-spam"></a>'),i.b("\n"+n)}),e.pop()),i.s(i.d("permissions.close",e,t,1),e,t,0,1056,1120,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('    <a class="comment-action comment-close js-delete"></a>'),i.b("\n"+n)}),e.pop()),i.b("  </div>"),i.b("\n"+n),i.b("</li>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/View/Comment",["jquery","nbd/View/Entity","nbd/util/pipe","be/modal/simple","hgn!templates/comment"],function(e,t,n,i,o){"use strict";var r={3e3:"close",5e3:"flag"},s=t.extend({template:n(o,e),templateData:function(){var e=this._super();return e.permissions=e.permissions.reduce(function(e,t){return e[r[t]]=!0,e},{}),e},rendered:function(){this.$view.hide().fadeIn().on("click",".js-delete",function(){this.$view.fadeOut(this.trigger.bind(this,"destroy"))}.bind(this)).on("click",".js-spam",function(){i({title:"Mark as Spam",html:"Are you sure you want to mark this comment as spam?"}).then(function(){this.$view.find(".js-spam").remove(),this.trigger("spam")}.bind(this))}.bind(this))}});return s}),define("be/Controller/Comment",["nbd/Controller/Entity","nbd/Model","be/View/Comment","nbd/trait/pubsub"],function(e,t,n,i){"use strict";var o=e.extend({id:function(){return this._model&&this._model.id()},_initView:function(){this._super.apply(this,arguments),this.listenTo(this._view,"all",this.trigger)},destroy:function(){this.stopListening(),this._super()}},{MODEL_CLASS:t,VIEW_CLASS:n}).mixin(i);return o}),define("be/comments",["jquery","log","nbd/trait/pubsub","lib/loadmore","be/Controller/Comment"],function(e,t,n,i,o){"use strict";return t=t.get("be/comments"),i.extend({_posts:[],destroy:function(){this.stopListening(),this.clear(),this._super()},load:function(t){return e.ajax({url:"/comments/"+this.data.type,data:e.extend({sort_order:"desc"},this.data,t)})},render:function(e){var t;return e&&e.comments&&(t=e.comments.map(this._makePost,this),this._posts=this._posts.concat(t)),this._posts["asc"===this.data.order?"reduceRight":"reduce"](function(e,t){return t.render(e.$content),e},this),e},after:function(){this.data.offset=this._posts.length?this._posts[this._posts.length-1].id():void 0},_makePost:function(e){var t=new o(e.id,e);return this.listenTo(t,"destroy",this.remove.bind(this,t)).listenTo(t,"spam",this.spam.bind(this,t)),t},add:function(e){var t=e instanceof o?e:this._makePost(e);this._posts.unshift(t),this.render()},remove:function(n){var i;~(i=this._posts.indexOf(n))&&(t.info("deleting comment:",n.id()),e.ajax({type:"DELETE",url:"/comments/"+this.data.type+"?comment_id="+n.id()}),this._posts.splice(i,1),n.destroy())},spam:function(n){t.info("spamming comment:",n.id()),e.ajax({type:"POST",url:"/v2/report/spam/"+this.data.type+"comment/"+n.id()})},clear:function(){return this._posts.forEach(function(e){e.destroy()}),this._posts=[],this}}).mixin(n)}),define("require/hgn!templates/error",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="error-bar">'),i.b(i.t(i.f("message",e,t,0))),i.b("</div>"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("be/error",["jquery","nbd/View/Element","nbd/util/pipe","hgn!templates/error"],function(e,t,n,i){"use strict";function o(e){return~e.indexOf("&lt;")?s.html(e).text():e}var r,s=e("<div>"),a=t.extend({template:n(i,e),templateData:function(){return{message:"Oops, an error occurred. | <a class='js-reload'>Please Refesh.</a>"}},render:function(e){return e=e?{message:o(e)}:null,this._super(e)},rendered:function(){this.$view.on("click",".js-reload",function(){window.location.reload()}).show()},hide:function(){return this.$view&&this.$view.hide()}}),l={init:function(e){return r=new a(e)},show:function(e){r&&r.render(e)},hide:function(){r&&r.hide()},Errorline:a};return l}),define("be/mentionSource",["log","nbd/trait/promise","lib/xhr"],function(e,t,n){"use strict";function i(e){for(var t={},n=0;n<e.length;++n)t[e[n].id]=e[n];return t}function o(e){var t={};return e.filter(function(e){return e.id in t?!1:(t[e.id]=e,!0)})}function r(e){return g.users=i(e),g.latest=Date.now(),"undefined"!=typeof sessionStorage&&(sessionStorage.contacts=JSON.stringify(g)),g.users}function s(e){return f=i(e)}function a(){var e;return a._cache?a._cache:(Date.now()-g.latest<p?(e=new t,e.resolve(g.users)):e=n(h.persistent).then(r),a._cache=e)}function l(){var e;return f?(e=new t,e.resolve(f)):e=n(h.local).then(s),e}function c(e){return a().then(_.bind(e))}function u(e){return l().then(_.bind(e))}function d(e,i){d._cache=d._cache||{},d._cache[e]=d._cache[e]||{};var o,r;return i.length<b&&(r=[]),d._cache[e][i]&&(r=d._cache[e][i]),r?(o=new t,o.resolve(r),o):n({url:e,data:{q:i}}).then(function(t){return r=y.call(t,i),d._cache[e][i]=r,r})}var f,p=3e5,h={global:"/mentions/search",following:"/mentions/search/following",persistent:"/mentions/feedback_circle",local:""},b=2,m=5,g="undefined"!=typeof sessionStorage?JSON.parse(sessionStorage.contacts||"{}"):{},v=function(e){return this[e]},w=function(e){var t=this.toLocaleLowerCase();return 0===e.first_name.toLocaleLowerCase().indexOf(t)||0===e.last_name.toLocaleLowerCase().indexOf(t)||0===e.username.toLocaleLowerCase().indexOf(t)},y=function(e){return this.filter(w,e)},x=function(e){return Object.keys(this).map(v,this).filter(w,e)},_=function(e){return x.call(e,this)};e=e.get("be/mentionSource");var j=d.bind(null,h.following),k=d.bind(null,h.global);return{init:function(e){return e.maxResults&&(m=e.maxResults),e.minLength&&(b=e.minLength),e.local&&(h.local=e.local),e.persistent&&(h.persistent=e.persistent),f=null,this},getLocal:l,getPersistent:a,source:function(t,n){function i(){n(o(s).slice(0,m))}var r=[u,c,j,k].map(function(e){return e(t.term)}),s=[];r.reduce(function(t,n){return(t?t.then(function(){return n}):n).then(function(e){e.forEach(function(e){e.value=e.username}),s=s.concat(e),i()},function(t){e.error(t)})},null).then(null,i)}}}),define("require/hgn!templates/mention",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<li class="ui-menu-item">'),i.b("\n"+n),i.b('  <a class="mention-user-wrap">'),i.b("\n"+n),i.b('    <img class="mention-user-image" src="'),i.b(i.v(i.d("images.50",e,t,0))),i.b('" />'),i.b("\n"+n),i.b('    <div class="mention-displayname">'),i.b(i.v(i.f("display_name",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b('    <div class="mention-username">@'),i.b(i.v(i.f("username",e,t,0))),i.b("</div>"),i.b("\n"+n),i.b("  </a>"),i.b("\n"+n),i.b("</li>"),i.b("\n"),i.fl()
},partials:{},subs:{}},"",e);return t.template=n,t}),function(e){"use strict";return"function"==typeof define&&define.amd?void define("jquery/be/automention",["jquery","jquery/be/autosuggest"],function(){var t=e.apply(this,arguments);return t}):jQuery&&e.call(this,jQuery)}(function(e){"use strict";var t=/(?:^|[^\w])@(\w+)/;return e.widget("be.automention",e.be.autosuggest,{_create:function(){this._super(),this._on(this.element,{mouseup:this.check,input:this.check,keyup:this.check,blur:this._clear}),this.menu.element.addClass("mention-menu")},_mention:{value:"",start:0,end:0},_last:null,_value:function(e){if(!e)return this._mention.value;var t=this._super(),n=t.indexOf("@",this._mention.start)+1;e=t.substring(0,n)+e," "!==t.charAt(this._mention.end)&&(e+=" "),e+=t.substring(this._mention.end),this._super(e),this.element.trigger("input")},_clear:function(){this._last=null},check:function(e){if(this.element.is(document.activeElement)){var n,i,o,r=document.activeElement.value,s=document.activeElement.selectionStart;s&&r&&(i=r.lastIndexOf(" ",s-1),o=r.indexOf(" ",s),o=~o?o:1/0,n=r.substring(i,o),n=t.exec(n),n=n&&n[1],this._last!==n&&(this._mention.value=n||"",this._mention.start=i,this._mention.end=o,this.search(null,e),this._trigger("value",e,n)),this._last=n)}}}),e.extend(e.be.automention,{usernameMatch:t}),e.be.automention}),define("be/automention",["jquery","be/error","be/mentionSource","hgn!templates/mention","jquery/be/automention"],function(e,t,n,i,o){"use strict";var r=new RegExp(o.usernameMatch.source,"g");return function(o,s){s=e.extend({maxMentions:5},s),n.init(s),o.length&&o.parent().addClass("ui-front").end().one("focus",function(){n.getPersistent(),n.getLocal()}).automention({delay:50,itemTemplate:i,source:n.source}).on("automentionopen",function(){var n,i,o=this.value,a={},l=e(this);o.replace(r,function(e,t){a[e]=t}),Object.keys(a).length>s.maxMentions&&(n=l.data("beAutomention"),i=l.data("errorbar")||new t.Errorline(n.menu.element),i.render("<strong>You may only mention "+s.maxMentions+" users</strong>"),i.$view.prependTo(n.menu.element),l.data("errorbar",i))})}}),define("be/form/Reset",["be/form"],function(e){"use strict";var t=e.extend({_submit:function(e){return this._super(e).then(function(){this.$form.find(":input").val("").removeAttr("checked selected")}.bind(this))}});return t}),define("be/charCounter",["jquery"],function(e){"use strict";function t(e){var t=e.match(/length\[(\d+)(,(\d+))?\]/),n={min:0,max:0};return t&&t.length&&(t[3]?(n.min=t[1]?parseInt(t[1],10):0,n.max=t[3]?parseInt(t[3],10):0):n.max=t[1]?parseInt(t[1],10):0),n}var n={init:function(n,i){var o=n.find(".js-characters-limited");o.each(function(){var n=e(this),o=e('<div class="js-char-limiter character-counter counter-normal">').insertAfter(n),r=n.data("validate")||"",s=e(".js-char-limiter"),a=t(r),l=.1*(a.max+a.min),c=function(){var t=a.max-e(this).val().length,n=a.min;o.html('<span class="letters-remaining">Characters left:</span> '+t),t>n&&o.addClass("counter-normal"),n>t||0===t?o.removeClass("counter-normal").addClass("counter-max"):o.removeClass("counter-max"),l>t&&t>n?o.addClass("counter-warn").removeClass("counter-normal"):o.removeClass("counter-warn")};s.append('<span class="letters-remaining">Characters left:</span> '+a.max),n.attr("maxlength",a.max),i&&n.removeAttr("maxlength"),n.on("input",c),c.call(this)})}};return n}),define("project/lib/comments",["jquery","be/comments","be/automention","be/form/Reset","nbd/util/media","nbd/util/async","be/charCounter"],function(e,t,n,i,o,r,s){"use strict";return{init:function(t,i){this.$view=t.find(".post-comment-block");var a,l=i.id,c=t.find(".comment_text");n(c,{local:"/mentions/project/"+l}),s.init(t),a=this.view(l,t),this.create(l,a),t.find(".js-signup").data("expedited_url","/signup/project/"+l+"/comment"),r(function(){i.open_comments&&o.is("desktop")&&e(window).scrollTop(e("#project-comments").offset().top)}.bind(this))},destroy:function(){this.$view&&this.$view.remove()},view:function(e,n){var i=n.find(".comments-total"),o=n.find(".comments-pagination"),r=t.init(n.find("#comments-list"),{type:"project",entity_id:e},function(e){o.toggleClass("hide",!e.more),+e.total&&i.text(e.total).siblings().text(e.total>1?"Comments":"Comment").end().parent().toggle(!!e.total)});return r.get(),r},create:function(e,t){function n(e){if(!e.id||!e.user)throw e;t.add({id:e.id,user:e.user,comment:e.comment,posted_on:"Just now",permissions:[3e3]})}this._form=new i(this.$view),this._form.commit=function(t){return t.data.entity_id=e,this.then(n),this}}}}),define("require/hgn!templates/project/info",["hogan"],function(e){function t(){return n.render.apply(n,arguments)}var n=new e.Template({code:function(e,t,n){var i=this;return i.b(n=n||""),i.b('<div class="project-info">'),i.b("\n"+n),i.b('  <div class="menu-group">'),i.b("\n"+n),i.b('    <h2 class="menu-title">'),i.b("\n"+n),i.b("      Project Info"),i.b("\n"+n),i.b("    </h2>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Created:</span> '),i.b(i.v(i.f("created_on",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Last Edited:</span> '),i.b(i.v(i.f("modified_on",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">About:</span> '),i.b(i.v(i.f("description",e,t,0))),i.b("\n"+n),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Tools:</span>'),i.b("\n"+n),i.s(i.f("tools",e,t,1),e,t,0,520,565,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>"),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.b('      <span class="menu-label">Tags:</span>'),i.b("\n"+n),i.s(i.f("tags",e,t,1),e,t,0,678,723,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b('      <a href="'),i.b(i.v(i.f("url",e,t,0))),i.b('">'),i.b(i.v(i.f("title",e,t,0))),i.b("</a>"),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="menu-group">'),i.b("\n"+n),i.b('    <h2 class="menu-title">'),i.b("\n"+n),i.b("      Copyright Info"),i.b("\n"+n),i.b("    </h2>"),i.b("\n"+n),i.b('    <div class="menu-section">'),i.b("\n"+n),i.s(i.f("copyright",e,t,1),e,t,0,891,922,"{{ }}")&&(i.rs(e,t,function(e,t,i){i.b("      "),i.b(i.t(i.f("description",e,t,0))),i.b("\n"+n)}),e.pop()),i.b("    </div>"),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b('  <div class="menu-section">'),i.b("\n"+n),i.b('    <a class="js-report">Report</a> | <a class="js-spam-project">Mark as Spam</a>'),i.b("\n"+n),i.b("  </div>"),i.b("\n"),i.b("\n"+n),i.b("</div> <!-- /project-info -->"),i.b("\n"),i.fl()},partials:{},subs:{}},"",e);return t.template=n,t}),define("project/trait/info",["moment","nbd/util/extend","hgn!templates/project/info"],function(e,t,n){"use strict";return{mustache:n,templateData:function(){var n=t({title:"Project Info",classes:["project-info"]},this._model.data()),i=this._model.get("constants").LICENSE_TEXTS;return["created_on","modified_on"].forEach(function(t){n[t]=e.unix(n[t]).format("M/D/YY")}),n.copyright.description=i[n.copyright.license],n},rendered:function(){this._super(),this.$view.on("click",".js-report",function(){this.hide(),this._controller.report()}.bind(this))}}}),define("project/Controller/Info",["be/Controller/Dialog/Roulette","be/View/Dialog/Layover","be/View/Dialog/Menu","project/trait/info","nbd/event"],function(e,t,n,i,o){"use strict";var r=e.extend({report:function(){o.trigger("report:open",this.$source)},render:function(e){this.$source=e,this._super(e)}},{VIEW_CLASS:{phone:t.extend(i),tablet:n.extend(i)}});return r}),define("project/lib/footer",["jquery","nbd/util/async","project/lib/comments","project/Controller/Info"],function(e,t,n,i){"use strict";return{init:function(o,r,s){var a=e.extend({},r,{constants:s});this.info=new i(r.id,a),this.info.setContext(o.find("#collect-and-share .project-info")),t(function(){n.init(o,r)})},destroy:function(){this.info&&this.info.destroy()}}}),define("project/lib/shuffle",["jquery","lib/gaq","jquery/plugins/jquery.ui.selectmenu"],function(e,t){"use strict";function n(){e("<div>",{id:"shuffle-blocking-div","class":"blocking-div"}).appendTo(e(document.body).addClass("shuffling")).css({opacity:0}).animate({opacity:.5},300)}return{init:function(i){function o(){e.ajax({url:r.attr("action"),data:r.serialize()}),t.event("project_shuffle","next_button_click",r.find(".ui-selectmenu-status").text());var i=r.find("#shuffle_next");i.width(i.width()).text("Shuffling..."),n()}var r=i.find("#project-shuffle-form");i.on("click",".shuffle-close",function(){return e(document.body).removeClass("project-shuffle-mode"),i.remove(),!1}).on("click",".form-submit",o).find(".form-select").selectmenu().on("change",o)}}}),require(["jquery","nbd/util/media","be/responsive","be/navigation","be/miniprofile","lib/social","project/lib/info","project/lib/content","project/lib/footer","project/lib/shuffle","vendor/history","page_config","page_constants"],function(e,t,n,i,o,r,s,a,l,c,u,d,f){"use strict";var p=e(document.body),h=window.location.href;i.init(p),s.init(p,d,f),n.init(),o.init(null,e("#site-content")),a.init(p.find("#primary-project-content"),d,f),l.init(p.find("#project-footer"),d,f);var b=p.find("#navmenui-shuffle");b.length&&c.init(b),t.on("desktop",function(){r.facebook()}),d.promote&&t.is("desktop")&&(console.info("Promote flag ON"),require(["project/editor/Controller/Dialog/Promote"],function(e){d.promote.id=d.id;var t=new e;t.render(d.promote)})),e(window).on("popstate",function(e){if(e.originalEvent){var t=u.getState();h!==t.url&&window.location.replace(t.url)}}).trigger("scroll")}),define("project/network",function(){}),function(e){if(e._cssWritten=e._cssWritten||[],-1==e._cssWritten.indexOf("project/network")){e._cssWritten.push("project/network");for(var t in requirejs.s.contexts)requirejs.s.contexts[t].nextTick=function(e){e()};require(["css","require/normalize","require"],function(e,t,n){var i=window.location.pathname.split("/");i.pop(),i=i.join("/")+"/";var o=n.toUrl("base_url").split("/");o.pop();var r=o.join("/")+"/";r=t.convertURIBase(r,i,"/"),"/"!=r.substr(0,1)&&(r="/"+r),e.inject(t(".wait:hover{cursor:wait;}.popup.mini-profile:before{width:20px;height:20px;background:#fff;box-shadow:-2px -2px 4px -2px rgba(0,0,0,0.4);content:\"\";position:absolute;z-index:-1;}.popup.mini-profile.top-right:before,.popup.mini-profile.top-left:before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg);top:-8px;}.popup.mini-profile.bottom-right:before,.popup.mini-profile.bottom-left:before{-webkit-transform:rotate(-134deg);-moz-transform:rotate(-134deg);-ms-transform:rotate(-134deg);-o-transform:rotate(-134deg);transform:rotate(-134deg);bottom:-8px;}.popup.mini-profile.top-right:before,.popup.mini-profile.bottom-right:before{right:45px;}.popup.mini-profile.top-left:before,.popup.mini-profile.bottom-left:before{left:45px;}.mini-profile-wrap{width:331px;}.mini-profile-wrap .gallery-projects-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#fff;border:1px solid #d9d9d9;border-radius:4px;padding:4px 3px 4px 1px;position:relative;text-decoration:none;width:361px;}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{background:#0088f5;background:-webkit-gradient(linear,0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-webkit-linear-gradient(0% 0%,0% 100%,from(rgba(0,156,252,0.75)),to(rgba(0,116,238,0.75)));background:-moz-linear-gradient(center top,rgba(0,156,252,0.75),rgba(0,116,238,0.75));background:linear-gradient(rgba(0,156,252,0.75),rgba(0,116,238,0.75));-webkit-transition:opacity 0.15s ease-in;-moz-transition:opacity 0.15s ease-in;transition:opacity 0.15s ease-in;border:1px solid #356bca;border-radius:4px;bottom:0;color:#fff;font-size:16px;left:0;opacity:0;position:absolute;text-align:center;text-decoration:none !important;text-transform:uppercase;top:0;right:0;text-shadow:1px 2px 0px #0a4fb9;}.ie .mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay{display:none;font-weight:bold;}.mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{opacity:1;}.ie .mini-profile-wrap .gallery-projects-wrap:hover .gallery-cover-overlay{display:block;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#bf009cfc',endColorstr='#bf0074ee',GradientType=0 );}.mini-profile-wrap .gallery-projects-wrap .gallery-cover-overlay-text{-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);transform:translateY(-50%);position:absolute;top:50%;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;background:#f3f3f3;float:left;height:90px;overflow:hidden;border-left:3px solid #fff;width:33.3%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap .project-cover{border-radius:0;box-shadow:none;margin:0;vertical-align:top;visibility:visible;width:100%;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap .project-cover.hidden{visibility:hidden;}.mini-profile-wrap .gallery-projects-wrap-4{width:479px;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap{width:25%;}.mini-profile-wrap .gallery-projects-wrap-4 .project-cover-wrap:nth-child(n+5){display:none;}.mini-profile-wrap .gallery-projects-wrap-2{width:242px;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap{width:50%;}.mini-profile-wrap .gallery-projects-wrap-2 .project-cover-wrap:nth-child(n+3){display:none;}.mini-profile-wrap .user-image-wrap,.mini-profile-wrap .user-image{width:35px;height:35px;}.mini-profile-wrap .user-image-wrap{background:#f3f3f3;display:block;float:left;margin:0 10px 0 0;padding:0;}.mini-profile-wrap .user-info{display:inline-block;max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.mini-profile-wrap .user-name{color:#3c3c3c;display:block;font-size:14px;padding-bottom:3px;}.mini-profile-wrap .location{font-size:22px;margin:5px -3px 0 -4px;top:3px;}.ie8 .mini-profile-wrap .location.be-font-inline,.ie9 .mini-profile-wrap .location.be-font-inline{display:none;}.mini-profile-wrap .location-link{color:#6f6f6f;font-size:13px;}.mini-profile-wrap .follow-button-container{float:right;width:auto !important;}.mini-profile-wrap .gallery-projects-wrap{float:left;margin:0 0 10px;width:331px;}.mini-profile-wrap .gallery-projects-wrap .project-cover-wrap{height:82px;width:108px;}.mini-profile-wrap .user-stat,.mini-profile-wrap .cover-stat{margin-right:8px;}.mini-profile-wrap .user-stats-followed{float:inherit;}.mini-profile-wrap .user-info-container{display:inline-block;}.mini-profile-wrap .stats-wrap,.mini-profile-wrap .stat-label{color:#adadad;}.mini-profile-wrap .stats-wrap{font-weight:bold;}.mini-profile-wrap .stat-label{font-size:24px;margin-right:0;text-shadow:0 1px 0 #fff;}.mini-profile-wrap .cover-stat-appreciations .stat-label{margin-right:-1px;}.mini-profile-wrap .user-stats-followed .stat-label{margin-right:-2px;}.mini-profile-wrap .stat-value{font-size:13px;}.fancybox-tmp iframe,.fancybox-tmp object{vertical-align:top;padding:0;margin:0;}.fancybox-wrap{position:absolute;top:0;left:0;z-index:1002;}.fancybox-outer{padding:0;margin:0;background:#f9f9f9;color:#444;text-shadow:none;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;}.fancybox-opened{z-index:1003;}.fancybox-opened .fancybox-outer{-webkit-box-shadow:0 10px 25px rgba(0,0,0,0.5);-moz-box-shadow:0 10px 25px rgba(0,0,0,0.5);box-shadow:0 10px 25px rgba(0,0,0,0.5);}.fancybox-inner{width:100%;height:100%;padding:0;margin:0;position:relative;outline:none;overflow:hidden;}.fancybox-error{color:#444;font:14px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;margin:0;padding:10px;}.fancybox-image,.fancybox-iframe{display:block;width:100%;height:100%;border:0;padding:0;margin:0;vertical-align:top;}.fancybox-image{max-width:100%;max-height:100%;}#fancybox-loading{position:fixed;top:50%;left:50%;margin-top:-21px;margin-left:-21px;width:42px;height:42px;background:url('//a2.behance.net/img/jquery/plugins/fancybox/loading.gif?cb=493651812');opacity:0.8;cursor:pointer;z-index:1010;}.fancybox-close,.fancybox-prev span,.fancybox-next span{background-image:url('//a2.behance.net/img/jquery/plugins/fancybox/sprite.png?cb=493651812');}.fancybox-close{position:absolute;top:-18px;right:-18px;width:36px;height:36px;cursor:pointer;z-index:1004;}.fancybox-prev,.fancybox-next{position:absolute;top:0;width:40%;height:100%;cursor:pointer;background:transparent url('//a2.behance.net/img/jquery/blank.gif?cb=493651812');z-index:1003;}.fancybox-prev{left:0;}.fancybox-next{right:0;}.fancybox-prev span,.fancybox-next span{position:absolute;top:50%;left:-9999px;width:36px;height:36px;margin-top:-18px;cursor:pointer;z-index:1003;}.fancybox-prev span{background-position:0 -36px;}.fancybox-next span{background-position:0 -72px;}.fancybox-prev:hover,.fancybox-next:hover{visibility:visible;}.fancybox-prev:hover span{left:20px;}.fancybox-next:hover span{left:auto;right:20px;}.fancybox-tmp{position:absolute;top:-9999px;left:-9999px;padding:0;overflow:visible;visibility:hidden;}#fancybox-overlay{position:absolute;top:0;left:0;overflow:hidden;display:none;z-index:1001;background:#000;}.fancybox-title{visibility:hidden;font:normal 13px/20px \"Helvetica Neue\",Helvetica,Arial,sans-serif;position:relative;text-shadow:none;z-index:1005;}.fancybox-opened .fancybox-title{visibility:visible;}.fancybox-title-float-wrap{position:absolute;bottom:0;right:50%;margin-bottom:-35px;z-index:1003;text-align:center;}.fancybox-title-float-wrap .child{display:inline-block;margin-right:-100%;padding:2px 20px;background:transparent;background:rgba(0,0,0,0.8);-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;text-shadow:0 1px 2px #222;color:#FFF;font-weight:bold;line-height:24px;white-space:nowrap;}.fancybox-title-outside-wrap{position:relative;margin-top:10px;color:#fff;}.fancybox-title-inside-wrap{margin-top:10px;}.fancybox-title-over-wrap{position:absolute;bottom:0;left:0;color:#fff;padding:10px;background:#000;background:rgba(0,0,0,.8);}.fancybox-wrap .fancybox-close,.fancybox-close,.popup-close{background:url(\"//a2.behance.net/img/network/site/sprite.png?cb=493651812\") repeat -244px -105px;display:block;height:29px;position:absolute;right:-15px;top:-15px;width:29px;z-index:100;}",r,i))});for(var t in requirejs.s.contexts)requirejs.s.contexts[t].nextTick=requirejs.nextTick}}(this);